"use strict";(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[739],{4739:(we,w,l)=>{l.r(w),l.d(w,{MovementsModule:()=>Re});var Z=l(9562),p=l(5030),g=l(5861),F=l(7317),B=l(5226),C=l.n(B),N=l(6811),x=l(2534),e=l(2223),S=l(6081),U=l(7066),H=l(3144);let P=(()=>{class t extends U.D{constructor(n){var a;super(),a=this,this.http=n,this.createMovement=function(){var c=(0,g.Z)(function*(m){return a.http.post(`${a.getApiUrl()}/movements`,{...m},{headers:a.getHeaders()}).toPromise()});return function(m){return c.apply(this,arguments)}}(),this.updateUser=function(){var c=(0,g.Z)(function*(m,f){return a.http.patch(`${a.getApiUrl()}/movements/${m}`,{...f},{headers:a.getHeaders()}).toPromise()});return function(m,f){return c.apply(this,arguments)}}(),this.dailyResume=(0,g.Z)(function*(){return a.http.get(`${a.getApiUrl()}/movements/daily-resume`,{headers:a.getHeaders()}).toPromise()}),this.movementsPending=(0,g.Z)(function*(){return a.http.get(`${a.getApiUrl()}/movements/pending`,{headers:a.getHeaders()}).toPromise()}),this.validateMovement=function(){var c=(0,g.Z)(function*(m){return a.http.post(`${a.getApiUrl()}/movements/validate-movement`,{id:m},{headers:a.getHeaders()}).toPromise()});return function(m){return c.apply(this,arguments)}}()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(H.eN))},t.\u0275dir=e.lG2({type:t,features:[e.qOj]}),t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var J=l(4074),$=l(5580),q=l(6550),b=l(4755),L=l(9089);function k(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",34)(1,"img",35),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.openImage("payment"))}),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("src",n.paymentImage,e.LSH)}}class Q{constructor(o,n){this.src=o,this.file=n}}let j=(()=>{class t{constructor(n,a,c,m,f,i,r,h){var d=this;this.ngxUiLoaderService=n,this.movementsService=a,this.imagesService=c,this.dataService=m,this.formBuilder=f,this.matDialog=i,this.titleService=r,this.router=h,this.paymentImage=null,this.uploader=new F.bA({allowedMimeType:["image/png","image/jpg","image/jpeg"],maxFileSize:1048576,autoUpload:!1,isHTML5:!0,url:""}),this.createForm=()=>this.formBuilder.group({type:["",p.kI.required],amount:["",p.kI.required],description:["",p.kI.required]}),this.redirect=(v="")=>{this.router.navigate(""!==v?[`${v}`]:[x.f.routes.dash])},this.createPayment=function(){var v=(0,g.Z)(function*(_){d.ngxUiLoaderService.startLoader("loader-02");try{_.preventDefault();let u=null;if(!d.paymentImage)return void d.dataService.errorHandling({front:!0,message:"La imagen del movimiento es obligatoria, verifique e intente nuevamente."});u=yield d.imagesService.createImage({base64:d.paymentImage,type:"payment"});const A=d.elementForm.getRawValue(),{type:y,amount:D,description:R}=A;yield d.movementsService.createMovement({type:y,amount:D,description:R,paymentPicture:u?.id||""}),d.redirect(x.f.routes.dash)}catch(u){d.dataService.errorHandling(u)}finally{d.ngxUiLoaderService.stopLoader("loader-02")}});return function(_){return v.apply(this,arguments)}}(),this.openImage=v=>{let _="",u="";"payment"===v&&(_="pago",u=this.paymentImage),C().fire({title:`<strong>Foto del ${_}</strong>`,html:`<div class="card"><div class="card-body"><img src="${u}" class="card-img-top" alt="..."></div></div>`,showCloseButton:!0,showCancelButton:!1,confirmButtonText:"Cerrar",confirmButtonAriaLabel:"close"})},this.openCamera=v=>{this.cameraDialogRef=this.matDialog.open(N.M,{autoFocus:!0,disableClose:!0,height:"90vh",minWidth:"95vw"}),this.cameraDialogRef.afterClosed().subscribe(function(){var _=(0,g.Z)(function*(u){u&&"payment"===v&&(d.paymentImage=u),d.cameraDialogRef=null});return function(u){return _.apply(this,arguments)}}())},this.uploadFile=v=>{const _=v.files[0],u=new FileReader;u.addEventListener("load",function(){var A=(0,g.Z)(function*(y){d.selectedFile=new Q(y.target.result,_),d.paymentImage=y.target.result});return function(y){return A.apply(this,arguments)}}()),u.readAsDataURL(_)},this.dataService.clearCreatedUser()}ngOnInit(){this.titleService.setTitle("IMPERIAL | Registrar movimiento"),this.elementForm=this.createForm()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(S.LA),e.Y36(P),e.Y36(J.C),e.Y36(U.D),e.Y36(p.qu),e.Y36($.uw),e.Y36(q.Dx),e.Y36(Z.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create"]],decls:52,vars:5,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dashboard"],[1,"feather","icon-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["name","elementForm","novalidate","",3,"formGroup"],[1,"mb-3"],["for","type",1,"form-label"],["id","type","formControlName","type","required","",1,"form-select"],["value","in","selected",""],["value","out"],["for","amount",1,"form-label"],[1,"input-group"],["placement","bottom","ngbTooltip","Tooltip on bottom",1,"input-group-text","hover"],["type","text","id","amount","name","amount","appInputRestriction","float","formControlName","amount","oninput","this.value=this.value.replace(/[^0-9]/g,'')","required","",1,"form-control",2,"text-align","right","padding-right","1em"],["for","description",1,"form-label"],["id","description","formControlName","description","autocomplete","off","required","",1,"form-control"],[1,"row","mb-3"],["class","col-12","style","text-align: center",4,"ngIf"],[1,"col-12"],["id","formFile","type","file","accept","image/png,image/jpeg","ng2FileSelect","",1,"form-control",3,"uploader","change"],["fileInput",""],[1,"d-grid","gap-2"],["href","","href","javascript:void(0)",1,"btn","btn-primary",3,"click"],[1,"feather","icon-camera"],[2,"text-align","center"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled","click"],[1,"btn","btn-secondary",3,"routerLink","click"],[1,"col-12",2,"text-align","center"],["alt","...",1,"card-img-top",3,"src","click"]],template:function(n,a){if(1&n){const c=e.EpF();e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"span",4),e.qZA()(),e.TgZ(5,"li",2),e._uU(6,"Movimientos"),e.qZA(),e.TgZ(7,"li",5),e._uU(8,"Registrar"),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h6",10),e._uU(14,"Registrar"),e.qZA(),e.TgZ(15,"form",11)(16,"div",12)(17,"label",13),e._uU(18,"Forma"),e.qZA(),e.TgZ(19,"select",14)(20,"option",15),e._uU(21,"Ingreso"),e.qZA(),e.TgZ(22,"option",16),e._uU(23,"Egreso"),e.qZA()()(),e.TgZ(24,"div",12)(25,"label",17),e._uU(26,"Monto"),e.qZA(),e.TgZ(27,"div",18)(28,"span",19),e._uU(29,"R$"),e.qZA(),e._UZ(30,"input",20),e.qZA()(),e.TgZ(31,"div",12)(32,"label",21),e._uU(33,"Descripci\xf3n"),e.qZA(),e._UZ(34,"textarea",22),e.qZA(),e.TgZ(35,"div",23),e.YNc(36,k,2,1,"div",24),e.qZA(),e.TgZ(37,"div",23)(38,"div",25)(39,"input",26,27),e.NdJ("change",function(){e.CHM(c);const f=e.MAs(40);return e.KtG(a.uploadFile(f))}),e.qZA()()(),e.TgZ(41,"div",23)(42,"div",25)(43,"div",28)(44,"a",29),e.NdJ("click",function(){return a.openCamera("payment")}),e._UZ(45,"span",30),e.qZA()()()(),e._UZ(46,"hr"),e.TgZ(47,"div",31)(48,"button",32),e.NdJ("click",function(f){return a.createPayment(f)}),e._uU(49,"Aceptar"),e.qZA(),e.TgZ(50,"button",33),e.NdJ("click",function(){return!1}),e._uU(51,"Cancelar"),e.qZA()()()()()()()}2&n&&(e.xp6(15),e.Q6J("formGroup",a.elementForm),e.xp6(21),e.Q6J("ngIf",a.paymentImage),e.xp6(3),e.Q6J("uploader",a.uploader),e.xp6(9),e.Q6J("disabled",a.elementForm.invalid),e.xp6(2),e.Q6J("routerLink","/admin/dashboard"))},dependencies:[Z.rH,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,p.Q7,b.O5,F.C6,L._L,p.sg,p.u]}),t})();var E=l(6356),Y=l(7228),V=l(274),O=l(1545),G=l(5268),T=l(1764),s=l(3627),I=l(2611),M=l(1576);function z(t,o){1&t&&(e.TgZ(0,"mat-header-cell",35)(1,"span",36),e._uU(2,"Descripci\xf3n"),e.qZA()())}function K(t,o){if(1&t&&(e.TgZ(0,"mat-cell",35)(1,"span",37),e._uU(2),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.Oqu(n.description)}}function X(t,o){1&t&&(e.TgZ(0,"mat-header-cell",38)(1,"span",36),e._uU(2,"Ingresos"),e.qZA()())}function W(t,o){if(1&t&&(e.TgZ(0,"mat-cell",38)(1,"span",39),e._uU(2),e.ALo(3,"number"),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.hij("",e.Dn7(3,1,n.amount,"","es")," R$")}}function ee(t,o){1&t&&(e.TgZ(0,"mat-header-cell",40)(1,"span",36),e._uU(2,"Imagen"),e.qZA()())}function te(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"span",36)(1,"button",42),e.NdJ("click",function(){e.CHM(n);const c=e.oxw().$implicit,m=e.oxw();return e.KtG(m.openImage(c.paymentPicture))}),e._UZ(2,"span",43),e.qZA()()}}function ae(t,o){1&t&&e._UZ(0,"span",36)}function ne(t,o){if(1&t&&(e.TgZ(0,"mat-cell",40),e.YNc(1,te,3,0,"span",41),e.YNc(2,ae,1,0,"span",41),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.Q6J("ngIf",n.paymentPicture),e.xp6(1),e.Q6J("ngIf",!n.paymentPicture)}}function oe(t,o){1&t&&e._UZ(0,"mat-header-row",44)}function ie(t,o){1&t&&e._UZ(0,"mat-row",45)}function re(t,o){1&t&&(e.TgZ(0,"mat-header-cell",35)(1,"span",36),e._uU(2,"Descripci\xf3n"),e.qZA()())}function le(t,o){if(1&t&&(e.TgZ(0,"mat-cell",35)(1,"span",37),e._uU(2),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.Oqu(n.description)}}function me(t,o){1&t&&(e.TgZ(0,"mat-header-cell",38)(1,"span",36),e._uU(2,"Egresos"),e.qZA()())}function se(t,o){if(1&t&&(e.TgZ(0,"mat-cell",38)(1,"span",39),e._uU(2),e.ALo(3,"number"),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.hij("",e.Dn7(3,1,n.amount,"","es")," R$")}}function ce(t,o){1&t&&e._UZ(0,"mat-header-row",44)}function de(t,o){1&t&&e._UZ(0,"mat-row",45)}function ue(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return e.KtG(c.blockDailyResume())}),e.TgZ(1,"span"),e._uU(2,"Bloquear"),e.qZA()()}}function pe(t,o){1&t&&(e.TgZ(0,"button",47)(1,"span"),e._uU(2,"Bloqueado"),e.qZA()())}function fe(t,o){1&t&&(e.TgZ(0,"mat-header-cell",32)(1,"span",33),e._uU(2,"Descripci\xf3n"),e.qZA()())}function he(t,o){if(1&t&&(e.TgZ(0,"mat-cell",32)(1,"span",34),e._uU(2),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.Oqu(n.description)}}function ve(t,o){1&t&&(e.TgZ(0,"mat-header-cell",35)(1,"span",33),e._uU(2,"Ingresos"),e.qZA()())}function _e(t,o){if(1&t&&(e.TgZ(0,"mat-cell",35)(1,"span",36),e._uU(2),e.ALo(3,"number"),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.hij("",e.Dn7(3,1,n.amount,"","es")," R$")}}function ye(t,o){1&t&&(e.TgZ(0,"mat-header-cell",37)(1,"span",33),e._uU(2,"Imagen"),e.qZA()())}function Ze(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"span",33)(1,"button",39),e.NdJ("click",function(){e.CHM(n);const c=e.oxw().$implicit,m=e.oxw();return e.KtG(m.openImage(c.paymentPicture))}),e._UZ(2,"span",40),e.qZA()()}}function xe(t,o){1&t&&e._UZ(0,"span",33)}function be(t,o){if(1&t&&(e.TgZ(0,"mat-cell",37),e.YNc(1,Ze,3,0,"span",38),e.YNc(2,xe,1,0,"span",38),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.Q6J("ngIf",n.paymentPicture),e.xp6(1),e.Q6J("ngIf",!n.paymentPicture)}}function Ce(t,o){1&t&&(e.TgZ(0,"mat-header-cell",37)(1,"span",33),e._uU(2,"Validar"),e.qZA()())}function Te(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"mat-cell",37)(1,"span",33)(2,"button",41),e.NdJ("click",function(){const m=e.CHM(n).$implicit,f=e.oxw();return e.KtG(f.validatePayment(m.id))}),e._UZ(3,"span",42),e.qZA()()()}}function Ae(t,o){1&t&&e._UZ(0,"mat-header-row",43)}function Ue(t,o){1&t&&e._UZ(0,"mat-row",44)}T.extend(V),T.extend(O),T.extend(G),T.tz.setDefault("America/Manaus");const De=[{path:"",redirectTo:"create",pathMatch:"full"},{path:"create",component:j},{path:"daily-resume",component:(()=>{class t{constructor(n,a,c,m,f){var i=this;this.ngxUiLoaderService=n,this.movementsService=a,this.dataService=c,this.titleService=m,this.router=f,this.today=T.tz().format("DD/MM/YYYY"),this.amountContractsFromToday=0,this.paymentsToBeCollected=0,this.amountToBeCollected=0,this.contractsFromToday=0,this.paymentsCollected=0,this.amountCollected=0,this.expensesAmount=0,this.incomesAmount=0,this.beforeAmount=0,this.todayAmount=0,this.total=0,this.movementsFromToday=[],this.closed=!1,this.displayedColumns=["details","amount"],this.displayedColumnsWithImage=["details","amount","image"],this.redirect=(r="")=>{this.router.navigate(""!==r?[`${r}`]:[x.f.routes.dash])},this.loadData=(0,g.Z)(function*(){i.ngxUiLoaderService.startLoader("loader-02");try{const r=yield i.movementsService.dailyResume();if(r){const{amountContractsFromToday:h,paymentsToBeCollected:d,amountToBeCollected:v,contractsFromToday:_,movementsFromToday:u,paymentsCollected:A,amountCollected:y,expensesAmount:D,incomesAmount:R,beforeAmount:Se,todayAmount:Pe,closed:qe}=r;i.amountContractsFromToday=h,i.amountToBeCollected=v,i.amountCollected=y,i.expensesAmount=D,i.incomesAmount=R,i.beforeAmount=Se,i.todayAmount=Pe,i.paymentsToBeCollected=d,i.contractsFromToday=_,i.paymentsCollected=A,i.closed=qe,i.total=y-h+(R-D),i.incomesDataSource=new s.by(u.incomesMovementsFromToday),i.expensesDataSource=new s.by(u.expensesMovementsFromToday)}}catch(r){i.dataService.errorHandling(r)}finally{i.ngxUiLoaderService.stopLoader("loader-02")}}),this.blockDailyResume=(0,g.Z)(function*(){C().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Bloquear",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&i.createFinalMovement()})}),this.createFinalMovement=(0,g.Z)(function*(){try{i.ngxUiLoaderService.startLoader("loader-02"),yield i.movementsService.createMovement({amount:i.todayAmount,type:"final",description:"Cierre de caja",paymentPicture:""}),i.redirect(x.f.routes.dash)}catch(r){i.dataService.errorHandling(r)}finally{i.ngxUiLoaderService.stopLoader("loader-02")}}),this.openImage=r=>{C().fire({title:"<strong>Imagen</strong>",html:`<div class="card"><div class="card-body"><img src="${r}" class="card-img-top" alt="..."></div></div>`,showCloseButton:!0,showCancelButton:!1,confirmButtonText:"Cerrar",confirmButtonAriaLabel:"close"})},this.user=this.dataService.getLoggedUser(),(!this.dataService.getIsLoggedIn()||!this.user)&&(this.dataService.clearLoginData(),this.redirect(x.f.routes.login))}ngOnInit(){(0,b.qS)(Y.Z),this.titleService.setTitle("IMPERIAL | Resumo do dia"),this.loadData()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(S.LA),e.Y36(P),e.Y36(U.D),e.Y36(q.Dx),e.Y36(Z.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-daily-resume"]],decls:158,vars:66,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dashboard"],[1,"feather","icon-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card","card-table"],[1,"card-body"],[1,"mb-3"],[1,"col-6",2,"padding","0 !important"],[2,"text-align","left"],[1,"card-title"],[2,"text-align","right"],[2,"text-align","center"],[1,"col-4",2,"padding","0 12px !important"],[2,"overflow-x","auto !important"],[1,"table-responsive"],["matSort","",1,"common-table",3,"dataSource"],["table",""],["matColumnDef","details"],["fxFlex","auto 1 200px",4,"matHeaderCellDef"],["fxFlex","auto 1 200px",4,"matCellDef"],["matColumnDef","amount"],["fxFlex","auto 1",4,"matHeaderCellDef"],["fxFlex","auto 1",4,"matCellDef"],["matColumnDef","image"],["fxFlex","auto 1 100px",4,"matHeaderCellDef"],["fxFlex","auto 1 100px",4,"matCellDef"],["class","grey-400-bg font-weight-600",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","user","matRipple","",4,"matRowDef","matRowDefColumns"],[1,"row","p-2","mt-4"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["fxFlex","auto 1 200px"],[2,"margin","0","text-align","center","width","100%"],[2,"margin","0","text-align","left","width","100%"],["fxFlex","auto 1"],[2,"margin","0","text-align","right","width","100%"],["fxFlex","auto 1 100px"],["style","margin: 0; text-align: center; width: 100%;",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-icon",3,"click"],[1,"feather","icon-image"],[1,"grey-400-bg","font-weight-600"],["matRipple","",1,"user"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","disabled","",1,"btn","btn-primary"]],template:function(n,a){1&n&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"span",4),e.qZA()(),e.TgZ(5,"li",2),e._uU(6,"Movimientos"),e.qZA(),e.TgZ(7,"li",5),e._uU(8,"Resumen del d\xeda"),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",6)(18,"div",11)(19,"p",12)(20,"b",13),e._uU(21,"Resumen del d\xeda"),e.qZA()()(),e.TgZ(22,"div",11)(23,"p",14)(24,"b",13),e._uU(25),e.qZA()()()(),e._UZ(26,"hr"),e.TgZ(27,"div",6)(28,"div",11)(29,"p",15)(30,"b"),e._uU(31,"Saldo anterior"),e.qZA(),e._UZ(32,"br"),e._uU(33),e.ALo(34,"number"),e.qZA()(),e.TgZ(35,"div",11)(36,"p",15)(37,"b"),e._uU(38,"Saldo del d\xeda"),e.qZA(),e._UZ(39,"br"),e._uU(40),e.ALo(41,"number"),e.qZA()()(),e._UZ(42,"br")(43,"br"),e.TgZ(44,"div",6)(45,"div",11)(46,"p",12)(47,"b"),e._uU(48,"Monto a cobrar en el d\xeda"),e.qZA()()(),e.TgZ(49,"div",11)(50,"p",14),e._uU(51),e.ALo(52,"number"),e.qZA()()(),e._UZ(53,"br"),e.TgZ(54,"div",6)(55,"div",11)(56,"p",12)(57,"b"),e._uU(58,"Abonos"),e.qZA()()(),e.TgZ(59,"div",11)(60,"p",14),e._uU(61),e.ALo(62,"number"),e.qZA()()(),e.TgZ(63,"div",6)(64,"div",11)(65,"p",12)(66,"b"),e._uU(67,"Ventas"),e.qZA()()(),e.TgZ(68,"div",11)(69,"p",14),e._uU(70),e.ALo(71,"number"),e.qZA()()(),e.TgZ(72,"div",6)(73,"div",11)(74,"p",12)(75,"b"),e._uU(76,"Ingresos"),e.qZA()()(),e.TgZ(77,"div",11)(78,"p",14),e._uU(79),e.ALo(80,"number"),e.qZA()()(),e.TgZ(81,"div",6)(82,"div",11)(83,"p",12)(84,"b"),e._uU(85,"Egresos"),e.qZA()()(),e.TgZ(86,"div",11)(87,"p",14),e._uU(88),e.ALo(89,"number"),e.qZA()()(),e._UZ(90,"hr"),e.TgZ(91,"div",6)(92,"div",11)(93,"p",12)(94,"b"),e._uU(95,"MONTO TOTAL"),e.qZA()()(),e.TgZ(96,"div",11)(97,"p",14),e._uU(98),e.ALo(99,"number"),e.qZA()()(),e._UZ(100,"hr"),e.TgZ(101,"div",6)(102,"div",16)(103,"p",15)(104,"b"),e._uU(105,"Parcelas a cobrar"),e.qZA(),e._UZ(106,"br"),e._uU(107),e.ALo(108,"number"),e.qZA()(),e.TgZ(109,"div",16)(110,"p",15)(111,"b"),e._uU(112,"Parcelas abonadas"),e.qZA(),e._UZ(113,"br"),e._uU(114),e.ALo(115,"number"),e.qZA()(),e.TgZ(116,"div",16)(117,"p",15)(118,"b"),e._uU(119,"Contratos nuevos"),e.qZA(),e._UZ(120,"br"),e._uU(121),e.ALo(122,"number"),e.qZA()()()()()()(),e.TgZ(123,"h6",13),e._uU(124,"Detalles"),e.qZA(),e.TgZ(125,"div",17)(126,"div",18)(127,"mat-table",19,20),e.ynx(129,21),e.YNc(130,z,3,0,"mat-header-cell",22),e.YNc(131,K,3,1,"mat-cell",23),e.BQk(),e.ynx(132,24),e.YNc(133,X,3,0,"mat-header-cell",25),e.YNc(134,W,4,5,"mat-cell",26),e.BQk(),e.ynx(135,27),e.YNc(136,ee,3,0,"mat-header-cell",28),e.YNc(137,ne,3,2,"mat-cell",29),e.BQk(),e.YNc(138,oe,1,0,"mat-header-row",30),e.YNc(139,ie,1,0,"mat-row",31),e.qZA()()(),e._UZ(140,"br"),e.TgZ(141,"div",17)(142,"div",18)(143,"mat-table",19,20),e.ynx(145,21),e.YNc(146,re,3,0,"mat-header-cell",22),e.YNc(147,le,3,1,"mat-cell",23),e.BQk(),e.ynx(148,24),e.YNc(149,me,3,0,"mat-header-cell",25),e.YNc(150,se,4,5,"mat-cell",26),e.BQk(),e.YNc(151,ce,1,0,"mat-header-row",30),e.YNc(152,de,1,0,"mat-row",31),e.qZA()()(),e._UZ(153,"br")(154,"br"),e.qZA()()()(),e.TgZ(155,"div",32),e.YNc(156,ue,3,0,"button",33),e.YNc(157,pe,3,0,"button",34),e.qZA()),2&n&&(e.xp6(25),e.Oqu(a.today),e.xp6(8),e.hij(" ",e.Dn7(34,22,a.beforeAmount||0,"","es")," R$ "),e.xp6(7),e.hij(" ",e.Dn7(41,26,a.todayAmount||0,"","es")," R$ "),e.xp6(11),e.hij(" ",e.Dn7(52,30,a.amountToBeCollected||0,"","es")," R$ "),e.xp6(10),e.hij(" ",e.Dn7(62,34,a.amountCollected||0,"","es")," R$ "),e.xp6(9),e.hij(" - ",e.Dn7(71,38,a.amountContractsFromToday||0,"","es")," R$ "),e.xp6(9),e.hij(" ",e.Dn7(80,42,a.incomesAmount||0,"","es")," R$ "),e.xp6(9),e.hij(" - ",e.Dn7(89,46,a.expensesAmount||0,"","es")," R$ "),e.xp6(10),e.hij(" ",e.Dn7(99,50,a.total||0,"","es")," R$ "),e.xp6(9),e.hij(" ",e.Dn7(108,54,a.paymentsToBeCollected||0,"","es")," "),e.xp6(7),e.hij(" ",e.Dn7(115,58,a.paymentsCollected||0,"","es")," "),e.xp6(7),e.hij(" ",e.Dn7(122,62,a.contractsFromToday||0,"","es")," "),e.xp6(6),e.Q6J("dataSource",a.incomesDataSource),e.xp6(11),e.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky","true"),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumnsWithImage),e.xp6(4),e.Q6J("dataSource",a.expensesDataSource),e.xp6(8),e.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky","true"),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(4),e.Q6J("ngIf",!a.closed),e.xp6(1),e.Q6J("ngIf",a.closed))},dependencies:[Z.rH,b.O5,I.YE,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,M.yH,b.JJ],styles:[".ngx-datatable[_ngcontent-%COMP%]   .datatable-footer[_ngcontent-%COMP%]{display:none!important}"]}),t})()},{path:"validation-payments-pending",component:(()=>{class t{constructor(n,a,c,m,f){var i=this;this.ngxUiLoaderService=n,this.movementsService=a,this.dataService=c,this.titleService=m,this.router=f,this.yesterdayAmount=0,this.todayAmount=0,this.movementsFromToday=[],this.closed=!1,this.displayedColumns=["details","amount","image","options"],this.redirect=(r="")=>{this.router.navigate(""!==r?[`${r}`]:[x.f.routes.dash])},this.loadData=(0,g.Z)(function*(){i.ngxUiLoaderService.startLoader("loader-02");try{const r=yield i.movementsService.movementsPending();if(r){const{data:h,todayAmount:d}=r;i.todayAmount=d,i.dataSource=new s.by(h)}}catch(r){i.dataService.errorHandling(r)}finally{i.ngxUiLoaderService.stopLoader("loader-02")}}),this.validatePayment=function(){var r=(0,g.Z)(function*(h){C().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Validar",cancelButtonText:"Cancelar"}).then(d=>{d.isConfirmed&&i.sendPayment(h)})});return function(h){return r.apply(this,arguments)}}(),this.sendPayment=function(){var r=(0,g.Z)(function*(h){try{i.ngxUiLoaderService.startLoader("loader-02"),yield i.movementsService.validateMovement(h),window.location.reload()}catch(d){i.dataService.errorHandling(d)}finally{i.ngxUiLoaderService.stopLoader("loader-02")}});return function(h){return r.apply(this,arguments)}}(),this.openImage=r=>{C().fire({title:"<strong>Imagen</strong>",html:`<div class="card"><div class="card-body"><img src="${r}" class="card-img-top" alt="..."></div></div>`,showCloseButton:!0,showCancelButton:!1,confirmButtonText:"Cerrar",confirmButtonAriaLabel:"close"})},this.user=this.dataService.getLoggedUser(),(!this.dataService.getIsLoggedIn()||!this.user)&&(this.dataService.clearLoginData(),this.redirect(x.f.routes.login))}ngOnInit(){(0,b.qS)(Y.Z),this.titleService.setTitle("IMPERIAL | Pagos pendientes por validar"),this.loadData()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(S.LA),e.Y36(P),e.Y36(U.D),e.Y36(q.Dx),e.Y36(Z.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-payments-pending"]],decls:44,vars:9,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dashboard"],[1,"feather","icon-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card","card-table"],[1,"card-body"],[1,"card-title"],[2,"overflow-x","auto !important"],[1,"table-responsive"],["matSort","",1,"common-table",3,"dataSource"],["table",""],["matColumnDef","details"],["fxFlex","auto 1 200px",4,"matHeaderCellDef"],["fxFlex","auto 1 200px",4,"matCellDef"],["matColumnDef","amount"],["fxFlex","auto 1",4,"matHeaderCellDef"],["fxFlex","auto 1",4,"matCellDef"],["matColumnDef","image"],["fxFlex","auto 1 100px",4,"matHeaderCellDef"],["fxFlex","auto 1 100px",4,"matCellDef"],["matColumnDef","options"],["class","grey-400-bg font-weight-600",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","user","matRipple","",4,"matRowDef","matRowDefColumns"],[1,"mb-3"],["for","paymentAmount",1,"form-label"],[1,"input-group"],["placement","bottom","ngbTooltip","Tooltip on bottom",1,"input-group-text","hover"],["disabled","","type","number","id","paymentAmount","autocomplete","off","required","",1,"form-control",2,"text-align","right",3,"value"],["fxFlex","auto 1 200px"],[2,"margin","0","text-align","center","width","100%"],[2,"margin","0","text-align","left","width","100%"],["fxFlex","auto 1"],[2,"margin","0","text-align","right","width","100%"],["fxFlex","auto 1 100px"],["style","margin: 0; text-align: center; width: 100%;",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-icon",3,"click"],[1,"feather","icon-image"],["type","button",1,"btn","btn-green","btn-icon",3,"click"],[1,"feather","icon-check"],[1,"grey-400-bg","font-weight-600"],["matRipple","",1,"user"]],template:function(n,a){1&n&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"span",4),e.qZA()(),e.TgZ(5,"li",2),e._uU(6,"Movimientos"),e.qZA(),e.TgZ(7,"li",5),e._uU(8,"Pagos pendientes por validar"),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h6",10),e._uU(14,"Pagos pendientes por validar"),e.qZA(),e.TgZ(15,"div",11)(16,"div",12)(17,"mat-table",13,14),e.ynx(19,15),e.YNc(20,fe,3,0,"mat-header-cell",16),e.YNc(21,he,3,1,"mat-cell",17),e.BQk(),e.ynx(22,18),e.YNc(23,ve,3,0,"mat-header-cell",19),e.YNc(24,_e,4,5,"mat-cell",20),e.BQk(),e.ynx(25,21),e.YNc(26,ye,3,0,"mat-header-cell",22),e.YNc(27,be,3,2,"mat-cell",23),e.BQk(),e.ynx(28,24),e.YNc(29,Ce,3,0,"mat-header-cell",22),e.YNc(30,Te,4,0,"mat-cell",23),e.BQk(),e.YNc(31,Ae,1,0,"mat-header-row",25),e.YNc(32,Ue,1,0,"mat-row",26),e.qZA()()(),e._UZ(33,"br")(34,"br"),e.TgZ(35,"div",27)(36,"label",28)(37,"b"),e._uU(38,"Monto pendiente por validar"),e.qZA()(),e.TgZ(39,"div",29)(40,"span",30),e._uU(41,"R$"),e.qZA(),e._UZ(42,"input",31),e.ALo(43,"number"),e.qZA()()()()()()),2&n&&(e.xp6(17),e.Q6J("dataSource",a.dataSource),e.xp6(14),e.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky","true"),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(10),e.s9C("value",e.Dn7(43,5,a.todayAmount,"","es")))},dependencies:[Z.rH,b.O5,I.YE,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,M.yH,L._L,b.JJ],styles:[".ngx-datatable[_ngcontent-%COMP%]   .datatable-footer[_ngcontent-%COMP%]{display:none!important}"]}),t})()}];let Re=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[Z.Bz.forChild(De),p.u5,E.A,p.UX]}),t})()}}]);