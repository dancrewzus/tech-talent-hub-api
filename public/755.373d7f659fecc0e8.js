"use strict";(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[755],{5755:(Ze,x,p)=>{p.r(x),p.d(x,{ContractsModule:()=>ne});var h=p(9562),c=p(5030),_=p(5861),M=p(9585),y=p(2534),e=p(2223),A=p(8405),S=p(7066),U=p(4755);function L(a,n){if(1&a&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.s9C("value",t.value),e.xp6(1),e.Oqu(t.title)}}function R(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",29)(2,"input",32),e.NdJ("change",function(r){e.CHM(t);const m=e.oxw(3);return e.KtG(m.setNonWorkingDays(r))}),e.qZA(),e.TgZ(3,"label",33),e._uU(4,"Segunda-feira"),e.qZA()(),e.TgZ(5,"div",29)(6,"input",34),e.NdJ("change",function(r){e.CHM(t);const m=e.oxw(3);return e.KtG(m.setNonWorkingDays(r))}),e.qZA(),e.TgZ(7,"label",35),e._uU(8,"Ter\xe7a-feira"),e.qZA()(),e.TgZ(9,"div",29)(10,"input",36),e.NdJ("change",function(r){e.CHM(t);const m=e.oxw(3);return e.KtG(m.setNonWorkingDays(r))}),e.qZA(),e.TgZ(11,"label",37),e._uU(12,"Quarta-feira"),e.qZA()(),e.TgZ(13,"div",29)(14,"input",38),e.NdJ("change",function(r){e.CHM(t);const m=e.oxw(3);return e.KtG(m.setNonWorkingDays(r))}),e.qZA(),e.TgZ(15,"label",39),e._uU(16,"Quinta-feira"),e.qZA()(),e.TgZ(17,"div",29)(18,"input",40),e.NdJ("change",function(r){e.CHM(t);const m=e.oxw(3);return e.KtG(m.setNonWorkingDays(r))}),e.qZA(),e.TgZ(19,"label",41),e._uU(20,"Sexta-feira"),e.qZA()(),e.TgZ(21,"div",29)(22,"input",42),e.NdJ("change",function(r){e.CHM(t);const m=e.oxw(3);return e.KtG(m.setNonWorkingDays(r))}),e.qZA(),e.TgZ(23,"label",43),e._uU(24,"S\xe1bado"),e.qZA()()()}}function I(a,n){if(1&a&&(e.TgZ(0,"div")(1,"div",29),e._UZ(2,"input",30),e.TgZ(3,"label",31),e._uU(4,"Domingo"),e.qZA()(),e.YNc(5,R,25,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.acceptDaysOff)}}function O(a,n){if(1&a&&(e.TgZ(0,"div")(1,"div",44)(2,"div",45),e._UZ(3,"input",46),e.TgZ(4,"label",47),e._uU(5," Domingo "),e.qZA()(),e.TgZ(6,"div",45),e._UZ(7,"input",48),e.TgZ(8,"label",49),e._uU(9," Segunda-feira "),e.qZA()(),e.TgZ(10,"div",45),e._UZ(11,"input",50),e.TgZ(12,"label",51),e._uU(13," Ter\xe7a-feira "),e.qZA()(),e.TgZ(14,"div",45),e._UZ(15,"input",52),e.TgZ(16,"label",53),e._uU(17," Quarta-feira "),e.qZA()(),e.TgZ(18,"div",45),e._UZ(19,"input",54),e.TgZ(20,"label",55),e._uU(21," Quinta-feira "),e.qZA()(),e.TgZ(22,"div",45),e._UZ(23,"input",56),e.TgZ(24,"label",57),e._uU(25," Sexta-feira "),e.qZA()(),e.TgZ(26,"div",45),e._UZ(27,"input",58),e.TgZ(28,"label",59),e._uU(29," S\xe1bado "),e.qZA()()()()),2&a){const t=e.oxw(2);e.xp6(3),e.s9C("value",t.elementForm.getRawValue().weeklySunday),e.xp6(4),e.s9C("value",t.elementForm.getRawValue().weeklyMonday),e.xp6(4),e.s9C("value",t.elementForm.getRawValue().weeklyTuesday),e.xp6(4),e.s9C("value",t.elementForm.getRawValue().weeklyWednesday),e.xp6(4),e.s9C("value",t.elementForm.getRawValue().weeklyThursday),e.xp6(4),e.s9C("value",t.elementForm.getRawValue().weeklyFriday),e.xp6(4),e.s9C("value",t.elementForm.getRawValue().weeklySaturday)}}function P(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"h6",12),e._uU(5,"Contrato"),e.qZA(),e.TgZ(6,"form",13)(7,"div",14)(8,"span")(9,"b"),e._uU(10,"CPF:"),e.qZA(),e._uU(11),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"span")(14,"b"),e._uU(15,"Nome:"),e.qZA(),e._uU(16),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"span")(19,"b"),e._uU(20,"Sobrenome:"),e.qZA(),e._uU(21),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"span")(24,"b"),e._uU(25,"N\xfamero de telefone:"),e.qZA(),e._uU(26),e.qZA(),e._UZ(27,"br"),e.TgZ(28,"span")(29,"b"),e._uU(30,"Data do \xfaltimo contrato:"),e.qZA(),e._uU(31),e.qZA(),e._UZ(32,"br"),e.qZA(),e._UZ(33,"hr"),e.TgZ(34,"div",14)(35,"label",15),e._uU(36,"Forma de pagamento"),e.qZA(),e.TgZ(37,"select",16),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.setModality())}),e.TgZ(38,"option",17),e._uU(39,"Di\xe1rio"),e.qZA(),e.TgZ(40,"option",18),e._uU(41,"Semanalmente"),e.qZA()()(),e.TgZ(42,"div",14)(43,"label",19),e._uU(44,"Modalidade de pagamento"),e.qZA(),e.TgZ(45,"select",20),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.calculateTotal())}),e.YNc(46,L,2,2,"option",21),e.qZA()(),e.TgZ(47,"div",14)(48,"label",22),e._uU(49,"Quantia"),e.qZA(),e.TgZ(50,"input",23),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.calculateTotal())}),e.qZA()(),e.TgZ(51,"div",14)(52,"span")(53,"b"),e._uU(54,"PAGAMENTO POR DIA:"),e.qZA(),e._uU(55),e.qZA(),e._UZ(56,"br"),e.TgZ(57,"span")(58,"b"),e._uU(59,"TOTAL:"),e.qZA(),e._uU(60),e.qZA(),e._UZ(61,"br"),e.qZA(),e.TgZ(62,"h4"),e._uU(63),e.qZA(),e._UZ(64,"br"),e.YNc(65,I,6,1,"div",24),e.YNc(66,O,30,7,"div",24),e._UZ(67,"hr"),e.TgZ(68,"div",25)(69,"button",26),e.NdJ("click",function(r){e.CHM(t);const m=e.oxw();return e.KtG(m.createContract(r))}),e._uU(70,"Aceitar"),e.qZA(),e.TgZ(71,"button",27),e.NdJ("click",function(){return!1}),e._uU(72,"Cancelar"),e.qZA()()()()()()()}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("formGroup",t.elementForm),e.xp6(5),e.hij(" ",t.elementForm.getRawValue().cpf,""),e.xp6(5),e.hij(" ",t.elementForm.getRawValue().name,""),e.xp6(5),e.hij(" ",t.elementForm.getRawValue().lastname,""),e.xp6(5),e.hij(" ",t.elementForm.getRawValue().phone,""),e.xp6(5),e.hij(" ",t.elementForm.getRawValue().lastContract,""),e.xp6(15),e.Q6J("ngForOf",t.modalityOptions),e.xp6(9),e.hij(" ",t.elementForm.getRawValue().paymentAmount," Reais"),e.xp6(5),e.hij(" ",t.elementForm.getRawValue().totalAmount," Reais"),e.xp6(3),e.Oqu(t.dayMessage),e.xp6(2),e.Q6J("ngIf","daily"===t.modalityType),e.xp6(1),e.Q6J("ngIf","weekly"===t.modalityType),e.xp6(3),e.Q6J("disabled",t.elementForm.invalid),e.xp6(2),e.Q6J("routerLink","/admin/dashboard")}}let H=(()=>{class a{constructor(t,o,r,m,g){var l=this;this.changeDetectorRefs=t,this.contractsService=o,this.dataService=r,this.formBuilder=m,this.router=g,this.rows=[],this.modalityOptions=[],this.loadingIndicator=!0,this.ColumnMode=M.hq,this.createdUser=null,this.dayMessage="Dias n\xe3o \xfateis",this.modalityType="daily",this.acceptDaysOff=!1,this.focusedInputs={loanAmount:!1},this.redirect=(i="")=>{this.router.navigate(""!==i?[`${i}`]:[y.f.routes.dash])},this.createForm=()=>this.formBuilder.group({cpf:["",c.kI.required],name:["",c.kI.required],lastname:["",c.kI.required],phone:["",c.kI.required],lastContract:["",c.kI.required],modality:["",c.kI.required],modalityOptions:["",c.kI.required],loanAmount:["",c.kI.required],percent:["",c.kI.required],payments:["",c.kI.required],totalAmount:["",c.kI.required],paymentAmount:["",c.kI.required],dailySunday:[!0],dailyMonday:[!1],dailyTuesday:[!1],dailyWednesday:[!1],dailyThursday:[!1],dailyFriday:[!1],dailySaturday:[!1],weeklySunday:[!1],weeklyMonday:[!1],weeklyTuesday:[!1],weeklyWednesday:[!1],weeklyThursday:[!1],weeklyFriday:[!1],weeklySaturday:[!1]}),this.patchForm=i=>{const s=this.modalityOptions[0];this.elementForm.patchValue({cpf:this.createdUser?this.createdUser.cpf:"",name:this.createdUser?this.createdUser.firstName:"",lastname:this.createdUser?this.createdUser.paternalSurname:"",phone:this.createdUser?this.createdUser.phoneNumber:"",lastContract:i,modality:"daily",modalityOptions:s.value,loanAmount:null,percent:null,payments:null,totalAmount:"0",paymentAmount:"0"}),this.elementForm.controls.dailySunday.disable(),this.acceptDaysOff=s.offDays||!1,this.createdUser&&(this.elementForm.controls.cpf.disable(),this.elementForm.controls.name.disable(),this.elementForm.controls.lastname.disable(),this.elementForm.controls.phone.disable()),this.elementForm.controls.totalAmount.disable(),this.elementForm.controls.paymentAmount.disable()},this.loadData=(0,_.Z)(function*(){l.modalityOptions=[{title:"10% 4d",value:"10-4",percent:10,days:4,offDays:!0},{title:"10% 11d",value:"10-11",percent:10,days:11,offDays:!0},{title:"20% 18d",value:"20-18",percent:20,days:18,offDays:!0},{title:"20% 20d",value:"20-20",percent:20,days:20,offDays:!0},{title:"20% 24d",value:"20-24",percent:20,days:24,offDays:!1},{title:"26% 30d",value:"26-30",percent:26,days:30,offDays:!1}];try{let i=null,s="Sem informa\xe7\xe3o";if(l.createdUser){const f=yield l.contractsService.loadContractData(l.createdUser.id);f?.length>0&&(i=f[0],i.status&&(l.dataService.errorHandling({front:!0,message:"O cliente tem um contrato ativo"}),l.redirect()),s=i.lastContractDate)}l.loadingIndicator=!1,l.patchForm(s)}catch(i){l.dataService.errorHandling(i)}}),this.createContract=function(){var i=(0,_.Z)(function*(s){try{s.preventDefault();const f=l.elementForm.getRawValue();let d="";const{lastContract:v,modality:b,modalityOptions:C,loanAmount:Z,percent:w,payments:k,totalAmount:ie,paymentAmount:oe,dailySunday:re,dailyMonday:le,dailyTuesday:se,dailyWednesday:de,dailyThursday:ce,dailyFriday:me,dailySaturday:ue,weeklySunday:pe,weeklyMonday:fe,weeklyTuesday:ye,weeklyWednesday:he,weeklyThursday:ge,weeklyFriday:_e,weeklySaturday:ve}=f;"daily"===b?(re&&(d=`${d}Sun`),le&&(d=`${d}Mon`),se&&(d=`${d}Tue`),de&&(d=`${d}Wed`),ce&&(d=`${d}Thu`),me&&(d=`${d}Fri`),ue&&(d=`${d}Sat`)):(pe&&(d=`${d}Sun`),fe&&(d=`${d}Mon`),ye&&(d=`${d}Tue`),he&&(d=`${d}Wed`),ge&&(d=`${d}Thu`),_e&&(d=`${d}Fri`),ve&&(d=`${d}Sat`));const Ce={lastContractDate:"Sem informa\xe7\xe3o"===v?null:v,client:l.createdUser?l.createdUser?.id:"",modality:f.modality,modalityOptions:C,loanAmount:Z,percent:w,payments:k,totalAmount:ie,paymentAmount:oe,nonWorkingDays:d};yield l.contractsService.createContract(Ce),l.redirect(y.f.routes.dash)}catch(f){l.dataService.errorHandling(f)}});return function(s){return i.apply(this,arguments)}}(),this.calculateTotal=()=>{this.elementForm.patchValue({totalAmount:"0",paymentAmount:"0"});const i=this.elementForm.getRawValue(),s=this.modalityOptions.find(k=>k.value===i.modalityOptions),f=s?.percent||"0",d=s?.days||"0",v=Number.parseInt(i.loanAmount),b=Number.parseInt(f),C=Number.parseInt(d),Z=v*(b/100)+v,w=C>0?Z/C:0;this.acceptDaysOff=s?.offDays||!1,this.elementForm.patchValue({totalAmount:isNaN(Z)?0:Number.parseInt(`${Z}`),paymentAmount:isNaN(w)?0:Number.parseInt(`${w}`),payments:C,percent:b})},this.setModality=()=>{const s=this.elementForm.getRawValue().modality;"daily"===s?(this.dayMessage="Dias n\xe3o \xfateis",this.elementForm.patchValue({dailySunday:!0,dailyMonday:!1,dailyTuesday:!1,dailyWednesday:!1,dailyThursday:!1,dailyFriday:!1,dailySaturday:!1})):(this.dayMessage="Dia de pagamento",this.elementForm.patchValue({weeklySunday:!0,weeklyMonday:!1,weeklyTuesday:!1,weeklyWednesday:!1,weeklyThursday:!1,weeklyFriday:!1,weeklySaturday:!1})),this.modalityType=s,this.changeDetectorRefs.detectChanges()},this.setNonWorkingDays=i=>{if(i.currentTarget.checked){const s=this.elementForm.getRawValue();if("daily"===s.modality)for(const f in s)Object.prototype.hasOwnProperty.call(s,f)&&f.includes("daily")&&f!==i.currentTarget.name&&"dailySunday"!==f&&(s[f]=!1);this.elementForm.patchValue({...s}),this.changeDetectorRefs.detectChanges()}}}ngOnInit(){this.createdUser=this.dataService.getCreatedUser()??null,this.createdUser||(this.dataService.errorHandling({front:!0,message:"voc\xea deve selecionar um cliente"}),this.redirect(y.f.routes.contractsPending)),this.elementForm=this.createForm(),this.loadData()}ngOnDestroy(){this.dataService.clearCreatedUser()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(e.sBO),e.Y36(A.W),e.Y36(S.D),e.Y36(c.qu),e.Y36(h.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-contracts-create"]],decls:11,vars:1,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],[1,"feather","icon-home"],["routerLink","/contracts/list"],["aria-current","page",1,"breadcrumb-item","active"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["name","elementForm","novalidate","",3,"formGroup"],[1,"mb-3"],["for","modality",1,"form-label"],["id","modality","formControlName","modality","required","",1,"form-select",3,"change"],["value","daily","selected",""],["value","weekly"],["for","modalityOptions",1,"form-label"],["id","modalityOptions","formControlName","modalityOptions","required","",1,"form-select",3,"change"],["selected","",3,"value",4,"ngFor","ngForOf"],["for","loanAmount",1,"form-label"],["type","text","id","loanAmount","name","loanAmount","appInputRestriction","float","formControlName","loanAmount","oninput","this.value=this.value.replace(/[^0-9]/g,'')","required","",1,"form-control",2,"text-align","right","padding-right","1em",3,"change"],[4,"ngIf"],[2,"text-align","center"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled","click"],[1,"btn","btn-secondary",3,"routerLink","click"],["selected","",3,"value"],[1,"form-check","mb-1"],["type","checkbox","formControlName","dailySunday","name","dailySunday","id","dailySunday",1,"form-check-input","pr-2"],["for","dailySunday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailyMonday","name","dailyMonday","id","dailyMonday",1,"form-check-input","pr-2",3,"change"],["for","dailyMonday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailyTuesday","name","dailyTuesday","id","dailyTuesday",1,"form-check-input","pr-2",3,"change"],["for","dailyTuesday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailyWednesday","name","dailyWednesday","id","dailyWednesday",1,"form-check-input","pr-2",3,"change"],["for","dailyWednesday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailyThursday","name","dailyThursday","id","dailyThursday",1,"form-check-input","pr-2",3,"change"],["for","dailyThursday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailyFriday","name","dailyFriday","id","dailyFriday",1,"form-check-input","pr-2",3,"change"],["for","dailyFriday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailySaturday","name","dailySaturday","id","dailySaturday",1,"form-check-input","pr-2",3,"change"],["for","dailySaturday",1,"form-label","pl-2"],[1,"mb-4"],[1,"form-check","mb-2"],["type","radio","formControlName","weeklySunday","name","weeklySelection","id","weeklySunday",1,"form-check-input",3,"value"],["for","weeklySunday",1,"form-check-label"],["type","radio","formControlName","weeklyMonday","name","weeklySelection","id","weeklyMonday","selected","",1,"form-check-input",3,"value"],["for","weeklyMonday",1,"form-check-label"],["type","radio","formControlName","weeklyTuesday","name","weeklySelection","id","weeklyTuesday",1,"form-check-input",3,"value"],["for","weeklyTuesday",1,"form-check-label"],["type","radio","formControlName","weeklyWednesday","name","weeklySelection","id","weeklyWednesday",1,"form-check-input",3,"value"],["for","weeklyWednesday",1,"form-check-label"],["type","radio","formControlName","weeklyThursday","name","weeklySelection","id","weeklyThursday",1,"form-check-input",3,"value"],["for","weeklyThursday",1,"form-check-label"],["type","radio","formControlName","weeklyFriday","name","weeklySelection","id","weeklyFriday",1,"form-check-input",3,"value"],["for","weeklyFriday",1,"form-check-label"],["type","radio","formControlName","weeklySaturday","name","weeklySelection","id","weeklySaturday",1,"form-check-input",3,"value"],["for","weeklySaturday",1,"form-check-label"]],template:function(t,o){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"span",4),e.qZA()(),e.TgZ(5,"li",2)(6,"a",5),e._uU(7,"Contratos"),e.qZA()(),e.TgZ(8,"li",6),e._uU(9,"Registrar contrato"),e.qZA()()(),e.YNc(10,P,73,14,"div",7)),2&t&&(e.xp6(10),e.Q6J("ngIf",!o.loadingIndicator))},dependencies:[h.rH,c._Y,c.YN,c.Kr,c.Fj,c.Wl,c.EJ,c._,c.JJ,c.JL,c.Q7,U.sg,U.O5,c.sg,c.u]}),a})();var F=p(512),u=p(3627),T=p(2611),J=p(9025),N=p(6081),Y=p(5497),D=p(6550),q=p(1576);const Q=["searchInput"];function W(a,n){1&a&&(e.TgZ(0,"mat-header-cell",28)(1,"span",29),e._uU(2,"Nome completo"),e.qZA()())}function G(a,n){if(1&a&&(e.TgZ(0,"mat-cell",28)(1,"span",30),e._uU(2),e.qZA()()),2&a){const t=n.$implicit;e.xp6(2),e.Oqu(t.fullname)}}function $(a,n){1&a&&e._UZ(0,"mat-header-row",31)}function E(a,n){1&a&&e._UZ(0,"mat-row",32)}let V=(()=>{class a{constructor(t,o,r,m,g){var l=this;this.ngxUiLoaderService=t,this.clientsService=o,this.dataService=r,this.titleService=m,this.router=g,this.pagination={},this.totalElements=0,this.pageSizeOptions=J.X.pageSizeOptions,this.displayedColumns=["fullname"],this.redirect=(i="")=>{this.router.navigate(""!==i?[`${i}`]:[y.f.routes.dash])},this.initPagination=()=>{this.pagination.offset=0,this.pagination.limit=this.defPagination,this.pagination.filter=""},this.dataLoad=(0,_.Z)(function*(){l.ngxUiLoaderService.startLoader("loader-02");try{const i=yield l.clientsService.findActives(l.pagination);i.data&&(l.dataSource=new u.by(i.data),l.totalElements=i.count,l.dataSource.sort=l.sort)}catch(i){l.dataService.errorHandling(i)}l.ngxUiLoaderService.stopLoader("loader-02")}),this.nextPage=i=>{const{pageSize:s,pageIndex:f}=i;this.dataService.setSelectedPagination(s),this.defPagination=this.dataService.getSelectedPagination(),this.pagination.offset=this.defPagination*f,this.pagination.limit=s,this.dataLoad()},this.searchElement=(i=!1)=>{try{this.pagination.filter=this.searchInput.nativeElement.value,i&&(this.paginator&&this.paginator.firstPage(),this.pagination.offset=0,this.dataLoad())}catch(s){this.dataService.errorHandling(s)}},this.createContractFromClient=i=>{},this.user=this.dataService.getLoggedUser(),(!this.dataService.getIsLoggedIn()||!this.user)&&(this.dataService.clearLoginData(),this.redirect(y.f.routes.login))}ngOnInit(){this.titleService.setTitle("IMPERIAL | Contratos ativos"),this.defPagination=this.dataService.getSelectedPagination(),this.initPagination(),this.dataLoad()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(N.LA),e.Y36(Y.a),e.Y36(S.D),e.Y36(D.Dx),e.Y36(h.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-contracts-list"]],viewQuery:function(t,o){if(1&t&&(e.Gf(F.NW,7),e.Gf(T.YE,7),e.Gf(Q,5)),2&t){let r;e.iGM(r=e.CRH())&&(o.paginator=r.first),e.iGM(r=e.CRH())&&(o.sort=r.first),e.iGM(r=e.CRH())&&(o.searchInput=r.first)}},decls:33,vars:7,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dashboard"],[1,"feather","icon-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"d-flex","align-items-center","flex-wrap","text-nowrap"],[1,"input-group","me-2","mb-2"],["name","searchInput","placeholder","Procurar",1,"form-control","border-primary","bg-transparent",2,"border-top-left-radius","1rem !important","border-bottom-left-radius","1rem !important","margin-left","0.5em","margin-right","0.5em"],["searchInput",""],["type","button",1,"btn","btn-primary","btn-icon",3,"click"],[1,"feather","icon-search"],[1,"col-md-12","stretch-card"],[1,"card","card-table"],[1,"card-body"],[1,"card-title"],[2,"overflow-x","auto !important"],[1,"table-responsive"],["matSort","",1,"common-table",3,"dataSource"],["table",""],["matColumnDef","fullname"],["fxFlex","auto 1 100%",4,"matHeaderCellDef"],["fxFlex","auto 1 100%",4,"matCellDef"],["class","grey-400-bg font-weight-600",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","user","matRipple","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["fxFlex","auto 1 100%"],[2,"margin","0","text-align","center","width","100%"],[2,"margin","0","text-align","left","padding-left","10px","width","100%"],[1,"grey-400-bg","font-weight-600"],["matRipple","",1,"user"]],template:function(t,o){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"span",4),e.qZA()(),e.TgZ(5,"li",2),e._uU(6,"Contratos"),e.qZA(),e.TgZ(7,"li",5),e._uU(8,"Clientes ativos"),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8),e._UZ(12,"input",9,10),e.TgZ(14,"button",11),e.NdJ("click",function(){return o.searchElement(!0)}),e._UZ(15,"span",12),e.qZA()()()(),e.TgZ(16,"div",6)(17,"div",13)(18,"div",14)(19,"div",15)(20,"h6",16),e._uU(21,"Lista de clientes ativos"),e.qZA(),e.TgZ(22,"div",17)(23,"div",18)(24,"mat-table",19,20),e.ynx(26,21),e.YNc(27,W,3,0,"mat-header-cell",22),e.YNc(28,G,3,1,"mat-cell",23),e.BQk(),e.YNc(29,$,1,0,"mat-header-row",24),e.YNc(30,E,1,0,"mat-row",25),e.qZA()()(),e.TgZ(31,"mat-paginator",26,27),e.NdJ("page",function(m){return o.nextPage(m)}),e.qZA()()()()()),2&t&&(e.xp6(24),e.Q6J("dataSource",o.dataSource),e.xp6(5),e.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky","true"),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("length",o.totalElements)("pageSizeOptions",o.pageSizeOptions)("pageSize",o.defPagination))},dependencies:[h.rH,T.YE,F.NW,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,q.yH],styles:[".loader[_ngcontent-%COMP%]{width:100%!important;height:100%!important;z-index:5001}"]}),a})();class j{constructor(n){this.getFullName=()=>`${this.firstName} ${this.paternalSurname}`,this.id=n.id||"",this.permission=n.permission||"",this.cpf=n.cpf||"",this.email=n.email||"",this.isLogged=n.isLogged||!1,this.role=n.role||"",this.gender=n.gender||"",this.fullname=n.fullname||"",this.firstName=n.firstName||"",this.secondName=n.secondName||"",this.paternalSurname=n.paternalSurname||"",this.maternalSurname=n.maternalSurname||"",this.birthDate=n.birthDate||"",this.profilePicture=n.profilePicture||"",this.residenceAddress=n.residenceAddress||"",this.billingAddress=n.billingAddress||"",this.phoneNumber=n.phoneNumber||""}}function z(a,n){1&a&&(e.TgZ(0,"mat-header-cell",23)(1,"span",24),e._uU(2,"Nome completo"),e.qZA()())}function K(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-cell",23)(1,"span",25),e.NdJ("click",function(){const m=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.openDetails(m))}),e._uU(2),e.qZA()()}if(2&a){const t=n.$implicit;e.xp6(2),e.hij(" ",t.fullname," ")}}function B(a,n){1&a&&e._UZ(0,"mat-header-row",26)}function X(a,n){1&a&&e._UZ(0,"mat-row",27)}let ee=(()=>{class a{constructor(t,o,r,m,g){var l=this;this.ngxUiLoaderService=t,this.contractsService=o,this.dataService=r,this.titleService=m,this.router=g,this.totalElements=0,this.displayedColumns=["fullname"],this.redirect=(i="")=>{this.router.navigate(""!==i?[`${i}`]:[y.f.routes.dash])},this.dataLoad=(0,_.Z)(function*(){l.ngxUiLoaderService.startLoader("loader-02");try{const i=yield l.contractsService.getPendingPaymentContracts();if(i.data){const s=i.data.clients?.map(f=>new j(f))||[];l.dataSource=new u.by(s),l.dataSource.sort=l.sort}}catch(i){l.dataService.errorHandling(i)}l.ngxUiLoaderService.stopLoader("loader-02")}),this.refresh=(0,_.Z)(function*(){yield l.dataLoad()}),this.openDetails=i=>{this.dataService.setExistClient(i),this.redirect(y.f.routes.clientsDetail)},this.user=this.dataService.getLoggedUser(),(!this.dataService.getIsLoggedIn()||!this.user)&&(this.dataService.clearLoginData(),this.redirect(y.f.routes.login))}ngOnInit(){this.titleService.setTitle("IMPERIAL | Pendentes de pagamento"),this.dataLoad()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(N.LA),e.Y36(A.W),e.Y36(S.D),e.Y36(D.Dx),e.Y36(h.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-pending"]],viewQuery:function(t,o){if(1&t&&e.Gf(T.YE,7),2&t){let r;e.iGM(r=e.CRH())&&(o.sort=r.first)}},decls:29,vars:4,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dashboard"],[1,"feather","icon-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],[1,"feather","icon-refresh-cw","btn-icon-append"],[1,"col-md-12","stretch-card"],[1,"card","card-table"],[1,"card-body"],[1,"card-title"],[2,"overflow-x","auto !important"],[1,"table-responsive"],["matSort","",1,"common-table",3,"dataSource"],["table",""],["matColumnDef","fullname"],["fxFlex","auto 1 100%",4,"matHeaderCellDef"],["fxFlex","auto 1 100%",4,"matCellDef"],["class","grey-400-bg font-weight-600",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","user","matRipple","",4,"matRowDef","matRowDefColumns"],["fxFlex","auto 1 100%"],[2,"margin","0","text-align","center","width","100%"],[2,"margin","0","text-align","left","padding-left","10px","width","100%",3,"click"],[1,"grey-400-bg","font-weight-600"],["matRipple","",1,"user"]],template:function(t,o){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"span",4),e.qZA()(),e.TgZ(5,"li",2),e._uU(6,"Contratos"),e.qZA(),e.TgZ(7,"li",5),e._uU(8,"Pendentes de pagamento"),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"button",8),e.NdJ("click",function(){return o.refresh()}),e._uU(12," Atualizar "),e._UZ(13,"span",9),e.qZA()()(),e.TgZ(14,"div",6)(15,"div",10)(16,"div",11)(17,"div",12)(18,"h6",13),e._uU(19,"Lista de clientes"),e.qZA(),e.TgZ(20,"div",14)(21,"div",15)(22,"mat-table",16,17),e.ynx(24,18),e.YNc(25,z,3,0,"mat-header-cell",19),e.YNc(26,K,3,1,"mat-cell",20),e.BQk(),e.YNc(27,B,1,0,"mat-header-row",21),e.YNc(28,X,1,0,"mat-row",22),e.qZA()()()()()()()),2&t&&(e.xp6(22),e.Q6J("dataSource",o.dataSource),e.xp6(5),e.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky","true"),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[h.rH,T.YE,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,q.yH]}),a})();var te=p(9291);const ae=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:V},{path:"create",component:H},{path:"pending",component:ee}];let ne=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[h.Bz.forChild(ae),c.u5,te.A,c.UX]}),a})()}}]);