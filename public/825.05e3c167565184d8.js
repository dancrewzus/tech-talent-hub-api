"use strict";(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[825],{6825:(Zt,W,f)=>{f.r(W),f.d(W,{ContractsModule:()=>vt});var x=f(9562),h=f(5030),D=f(5861);var v=(()=>((v=v||{}).standard="standard",v.flex="flex",v.force="force",v))();const k={},N=typeof document<"u"?document.createElement("div").style:void 0,F=function(){const n=typeof window<"u"?window.getComputedStyle(document.documentElement,""):void 0,o=typeof n<"u"?Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/):null,e=null!==o?o[1]:void 0,i=typeof e<"u"?"WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1]:void 0;return i?{dom:i,lowercase:e,css:`-${e}-`,js:e[0].toUpperCase()+e.substr(1)}:void 0}();function R(n){const o=function E(n){return(n=(n=(n=n.replace(/[^a-zA-Z0-9 ]/g," ")).replace(/([a-z](?=[A-Z]))/g,"$1 ")).replace(/([^a-zA-Z0-9 ])|^[0-9]+/g,"").trim().toLowerCase()).replace(/([ 0-9]+)([a-zA-Z])/g,function(o,e,i){return e.trim()+i.toUpperCase()})}(n);return k[o]||(void 0!==F&&void 0!==N[F.css+n]?k[o]=F.css+n:void 0!==N[n]&&(k[o]=n)),k[o]}typeof window<"u"&&R("transform"),typeof window<"u"&&R("backfaceVisibility"),typeof window<"u"&&R("transform"),typeof window<"u"&&R("perspective");const O=typeof window<"u"?window.navigator.userAgent:"Chrome";/Safari\//.test(O)&&/Chrome\//.test(O),typeof document<"u"&&!document.elementsFromPoint&&(document.elementsFromPoint=function Ve(n,o){const e=[],i=[];let a,r,c;for(;(a=document.elementFromPoint(n,o))&&-1===e.indexOf(a)&&null!=a;)e.push(a),i.push({value:a.style.getPropertyValue("pointer-events"),priority:a.style.getPropertyPriority("pointer-events")}),a.style.setProperty("pointer-events","none","important");for(r=i.length;c=i[--r];)e[r].style.setProperty("pointer-events",c.value?c.value:"",c.priority);return e});var _=f(2534),t=f(2223),U=f(8405),A=f(7066),B=f(4755);function We(n,o){if(1&n&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.title)}}function ze(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",29)(2,"input",32),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.setNonWorkingDays(a))}),t.qZA(),t.TgZ(3,"label",33),t._uU(4,"Segunda-feira"),t.qZA()(),t.TgZ(5,"div",29)(6,"input",34),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.setNonWorkingDays(a))}),t.qZA(),t.TgZ(7,"label",35),t._uU(8,"Ter\xe7a-feira"),t.qZA()(),t.TgZ(9,"div",29)(10,"input",36),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.setNonWorkingDays(a))}),t.qZA(),t.TgZ(11,"label",37),t._uU(12,"Quarta-feira"),t.qZA()(),t.TgZ(13,"div",29)(14,"input",38),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.setNonWorkingDays(a))}),t.qZA(),t.TgZ(15,"label",39),t._uU(16,"Quinta-feira"),t.qZA()(),t.TgZ(17,"div",29)(18,"input",40),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.setNonWorkingDays(a))}),t.qZA(),t.TgZ(19,"label",41),t._uU(20,"Sexta-feira"),t.qZA()(),t.TgZ(21,"div",29)(22,"input",42),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.setNonWorkingDays(a))}),t.qZA(),t.TgZ(23,"label",43),t._uU(24,"S\xe1bado"),t.qZA()()()}}function Ze(n,o){if(1&n&&(t.TgZ(0,"div")(1,"div",29),t._UZ(2,"input",30),t.TgZ(3,"label",31),t._uU(4,"Domingo"),t.qZA()(),t.YNc(5,ze,25,0,"div",24),t.qZA()),2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.acceptDaysOff)}}function Ne(n,o){if(1&n&&(t.TgZ(0,"div")(1,"div",44)(2,"div",45),t._UZ(3,"input",46),t.TgZ(4,"label",47),t._uU(5," Domingo "),t.qZA()(),t.TgZ(6,"div",45),t._UZ(7,"input",48),t.TgZ(8,"label",49),t._uU(9," Segunda-feira "),t.qZA()(),t.TgZ(10,"div",45),t._UZ(11,"input",50),t.TgZ(12,"label",51),t._uU(13," Ter\xe7a-feira "),t.qZA()(),t.TgZ(14,"div",45),t._UZ(15,"input",52),t.TgZ(16,"label",53),t._uU(17," Quarta-feira "),t.qZA()(),t.TgZ(18,"div",45),t._UZ(19,"input",54),t.TgZ(20,"label",55),t._uU(21," Quinta-feira "),t.qZA()(),t.TgZ(22,"div",45),t._UZ(23,"input",56),t.TgZ(24,"label",57),t._uU(25," Sexta-feira "),t.qZA()(),t.TgZ(26,"div",45),t._UZ(27,"input",58),t.TgZ(28,"label",59),t._uU(29," S\xe1bado "),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(3),t.s9C("value",e.elementForm.getRawValue().weeklySunday),t.xp6(4),t.s9C("value",e.elementForm.getRawValue().weeklyMonday),t.xp6(4),t.s9C("value",e.elementForm.getRawValue().weeklyTuesday),t.xp6(4),t.s9C("value",e.elementForm.getRawValue().weeklyWednesday),t.xp6(4),t.s9C("value",e.elementForm.getRawValue().weeklyThursday),t.xp6(4),t.s9C("value",e.elementForm.getRawValue().weeklyFriday),t.xp6(4),t.s9C("value",e.elementForm.getRawValue().weeklySaturday)}}function Oe(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"h6",12),t._uU(5,"Contrato"),t.qZA(),t.TgZ(6,"form",13)(7,"div",14)(8,"span")(9,"b"),t._uU(10,"CPF:"),t.qZA(),t._uU(11),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"span")(14,"b"),t._uU(15,"Nome:"),t.qZA(),t._uU(16),t.qZA(),t._UZ(17,"br"),t.TgZ(18,"span")(19,"b"),t._uU(20,"Sobrenome:"),t.qZA(),t._uU(21),t.qZA(),t._UZ(22,"br"),t.TgZ(23,"span")(24,"b"),t._uU(25,"N\xfamero de telefone:"),t.qZA(),t._uU(26),t.qZA(),t._UZ(27,"br"),t.TgZ(28,"span")(29,"b"),t._uU(30,"Data do \xfaltimo contrato:"),t.qZA(),t._uU(31),t.qZA(),t._UZ(32,"br"),t.qZA(),t._UZ(33,"hr"),t.TgZ(34,"div",14)(35,"label",15),t._uU(36,"Forma de pagamento"),t.qZA(),t.TgZ(37,"select",16),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.setModality())}),t.TgZ(38,"option",17),t._uU(39,"Di\xe1rio"),t.qZA(),t.TgZ(40,"option",18),t._uU(41,"Semanalmente"),t.qZA()()(),t.TgZ(42,"div",14)(43,"label",19),t._uU(44,"Modalidade de pagamento"),t.qZA(),t.TgZ(45,"select",20),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.calculateTotal())}),t.YNc(46,We,2,2,"option",21),t.qZA()(),t.TgZ(47,"div",14)(48,"label",22),t._uU(49,"Quantia"),t.qZA(),t.TgZ(50,"input",23),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.calculateTotal())}),t.qZA()(),t.TgZ(51,"div",14)(52,"span")(53,"b"),t._uU(54,"PAGAMENTO POR DIA:"),t.qZA(),t._uU(55),t.qZA(),t._UZ(56,"br"),t.TgZ(57,"span")(58,"b"),t._uU(59,"TOTAL:"),t.qZA(),t._uU(60),t.qZA(),t._UZ(61,"br"),t.qZA(),t.TgZ(62,"h4"),t._uU(63),t.qZA(),t._UZ(64,"br"),t.YNc(65,Ze,6,1,"div",24),t.YNc(66,Ne,30,7,"div",24),t._UZ(67,"hr"),t.TgZ(68,"div",25)(69,"button",26),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.createContract(a))}),t._uU(70,"Aceitar"),t.qZA(),t.TgZ(71,"button",27),t.NdJ("click",function(){return!1}),t._uU(72,"Cancelar"),t.qZA()()()()()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("formGroup",e.elementForm),t.xp6(5),t.hij(" ",e.elementForm.getRawValue().cpf,""),t.xp6(5),t.hij(" ",e.elementForm.getRawValue().name,""),t.xp6(5),t.hij(" ",e.elementForm.getRawValue().lastname,""),t.xp6(5),t.hij(" ",e.elementForm.getRawValue().phone,""),t.xp6(5),t.hij(" ",e.elementForm.getRawValue().lastContract,""),t.xp6(15),t.Q6J("ngForOf",e.modalityOptions),t.xp6(9),t.hij(" ",e.elementForm.getRawValue().paymentAmount," Reais"),t.xp6(5),t.hij(" ",e.elementForm.getRawValue().totalAmount," Reais"),t.xp6(3),t.Oqu(e.dayMessage),t.xp6(2),t.Q6J("ngIf","daily"===e.modalityType),t.xp6(1),t.Q6J("ngIf","weekly"===e.modalityType),t.xp6(3),t.Q6J("disabled",e.elementForm.invalid),t.xp6(2),t.Q6J("routerLink","/admin/dashboard")}}let $e=(()=>{class n{constructor(e,i,a,r,c){var l=this;this.changeDetectorRefs=e,this.contractsService=i,this.dataService=a,this.formBuilder=r,this.router=c,this.rows=[],this.modalityOptions=[],this.loadingIndicator=!0,this.ColumnMode=v,this.createdUser=null,this.dayMessage="Dias n\xe3o \xfateis",this.modalityType="daily",this.acceptDaysOff=!1,this.focusedInputs={loanAmount:!1},this.redirect=(s="")=>{this.router.navigate(""!==s?[`${s}`]:[_.f.routes.dash])},this.createForm=()=>this.formBuilder.group({cpf:["",h.kI.required],name:["",h.kI.required],lastname:["",h.kI.required],phone:["",h.kI.required],lastContract:["",h.kI.required],modality:["",h.kI.required],modalityOptions:["",h.kI.required],loanAmount:["",h.kI.required],percent:["",h.kI.required],payments:["",h.kI.required],totalAmount:["",h.kI.required],paymentAmount:["",h.kI.required],dailySunday:[!0],dailyMonday:[!1],dailyTuesday:[!1],dailyWednesday:[!1],dailyThursday:[!1],dailyFriday:[!1],dailySaturday:[!1],weeklySunday:[!1],weeklyMonday:[!1],weeklyTuesday:[!1],weeklyWednesday:[!1],weeklyThursday:[!1],weeklyFriday:[!1],weeklySaturday:[!1]}),this.patchForm=s=>{const d=this.modalityOptions[0];this.elementForm.patchValue({cpf:this.createdUser?this.createdUser.cpf:"",name:this.createdUser?this.createdUser.firstName:"",lastname:this.createdUser?this.createdUser.paternalSurname:"",phone:this.createdUser?this.createdUser.phoneNumber:"",lastContract:s,modality:"daily",modalityOptions:d.value,loanAmount:null,percent:null,payments:null,totalAmount:"0",paymentAmount:"0"}),this.elementForm.controls.dailySunday.disable(),this.acceptDaysOff=d.offDays||!1,this.createdUser&&(this.elementForm.controls.cpf.disable(),this.elementForm.controls.name.disable(),this.elementForm.controls.lastname.disable(),this.elementForm.controls.phone.disable()),this.elementForm.controls.totalAmount.disable(),this.elementForm.controls.paymentAmount.disable()},this.loadData=(0,D.Z)(function*(){l.modalityOptions=[{title:"10% 4d",value:"10-4",percent:10,days:4,offDays:!0},{title:"10% 11d",value:"10-11",percent:10,days:11,offDays:!0},{title:"20% 18d",value:"20-18",percent:20,days:18,offDays:!0},{title:"20% 20d",value:"20-20",percent:20,days:20,offDays:!0},{title:"20% 24d",value:"20-24",percent:20,days:24,offDays:!1},{title:"26% 30d",value:"26-30",percent:26,days:30,offDays:!1}];try{let s=null,d="Sem informa\xe7\xe3o";if(l.createdUser){const u=yield l.contractsService.loadContractData(l.createdUser.id);u?.length>0&&(s=u[0],s.status&&(l.dataService.errorHandling({front:!0,message:"O cliente tem um contrato ativo"}),l.redirect()),d=s.lastContractDate)}l.loadingIndicator=!1,l.patchForm(d)}catch(s){l.dataService.errorHandling(s)}}),this.createContract=function(){var s=(0,D.Z)(function*(d){try{d.preventDefault();const u=l.elementForm.getRawValue();let p="";const{lastContract:m,modality:y,modalityOptions:w,loanAmount:C,percent:T,payments:V,totalAmount:Ct,paymentAmount:Tt,dailySunday:Dt,dailyMonday:St,dailyTuesday:It,dailyWednesday:kt,dailyThursday:Rt,dailyFriday:Ht,dailySaturday:Pt,weeklySunday:Et,weeklyMonday:Ft,weeklyTuesday:Mt,weeklyWednesday:At,weeklyThursday:Bt,weeklyFriday:Vt,weeklySaturday:Wt}=u;"daily"===y?(Dt&&(p=`${p}Sun`),St&&(p=`${p}Mon`),It&&(p=`${p}Tue`),kt&&(p=`${p}Wed`),Rt&&(p=`${p}Thu`),Ht&&(p=`${p}Fri`),Pt&&(p=`${p}Sat`)):(Et&&(p=`${p}Sun`),Ft&&(p=`${p}Mon`),Mt&&(p=`${p}Tue`),At&&(p=`${p}Wed`),Bt&&(p=`${p}Thu`),Vt&&(p=`${p}Fri`),Wt&&(p=`${p}Sat`));const zt={lastContractDate:"Sem informa\xe7\xe3o"===m?null:m,client:l.createdUser?l.createdUser?.id:"",modality:u.modality,modalityOptions:w,loanAmount:C,percent:T,payments:V,totalAmount:Ct,paymentAmount:Tt,nonWorkingDays:p};yield l.contractsService.createContract(zt),l.redirect(_.f.routes.dash)}catch(u){l.dataService.errorHandling(u)}});return function(d){return s.apply(this,arguments)}}(),this.calculateTotal=()=>{this.elementForm.patchValue({totalAmount:"0",paymentAmount:"0"});const s=this.elementForm.getRawValue(),d=this.modalityOptions.find(V=>V.value===s.modalityOptions),u=d?.percent||"0",p=d?.days||"0",m=Number.parseInt(s.loanAmount),y=Number.parseInt(u),w=Number.parseInt(p),C=m*(y/100)+m,T=w>0?C/w:0;this.acceptDaysOff=d?.offDays||!1,this.elementForm.patchValue({totalAmount:isNaN(C)?0:Number.parseInt(`${C}`),paymentAmount:isNaN(T)?0:Number.parseInt(`${T}`),payments:w,percent:y})},this.setModality=()=>{const d=this.elementForm.getRawValue().modality;"daily"===d?(this.dayMessage="Dias n\xe3o \xfateis",this.elementForm.patchValue({dailySunday:!0,dailyMonday:!1,dailyTuesday:!1,dailyWednesday:!1,dailyThursday:!1,dailyFriday:!1,dailySaturday:!1})):(this.dayMessage="Dia de pagamento",this.elementForm.patchValue({weeklySunday:!0,weeklyMonday:!1,weeklyTuesday:!1,weeklyWednesday:!1,weeklyThursday:!1,weeklyFriday:!1,weeklySaturday:!1})),this.modalityType=d,this.changeDetectorRefs.detectChanges()},this.setNonWorkingDays=s=>{if(s.currentTarget.checked){const d=this.elementForm.getRawValue();if("daily"===d.modality)for(const u in d)Object.prototype.hasOwnProperty.call(d,u)&&u.includes("daily")&&u!==s.currentTarget.name&&"dailySunday"!==u&&(d[u]=!1);this.elementForm.patchValue({...d}),this.changeDetectorRefs.detectChanges()}}}ngOnInit(){this.createdUser=this.dataService.getCreatedUser()??null,this.createdUser||(this.dataService.errorHandling({front:!0,message:"voc\xea deve selecionar um cliente"}),this.redirect(_.f.routes.contractsPending)),this.elementForm=this.createForm(),this.loadData()}ngOnDestroy(){this.dataService.clearCreatedUser()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(U.W),t.Y36(A.D),t.Y36(h.qu),t.Y36(x.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-contracts-create"]],decls:11,vars:1,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dashboard"],[1,"feather","icon-home"],["routerLink","/admin/contracts/list"],["aria-current","page",1,"breadcrumb-item","active"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["name","elementForm","novalidate","",3,"formGroup"],[1,"mb-3"],["for","modality",1,"form-label"],["id","modality","formControlName","modality","required","",1,"form-select",3,"change"],["value","daily","selected",""],["value","weekly"],["for","modalityOptions",1,"form-label"],["id","modalityOptions","formControlName","modalityOptions","required","",1,"form-select",3,"change"],["selected","",3,"value",4,"ngFor","ngForOf"],["for","loanAmount",1,"form-label"],["type","text","id","loanAmount","name","loanAmount","appInputRestriction","float","formControlName","loanAmount","oninput","this.value=this.value.replace(/[^0-9]/g,'')","required","",1,"form-control",2,"text-align","right","padding-right","1em",3,"change"],[4,"ngIf"],[2,"text-align","center"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled","click"],[1,"btn","btn-secondary",3,"routerLink","click"],["selected","",3,"value"],[1,"form-check","mb-1"],["type","checkbox","formControlName","dailySunday","name","dailySunday","id","dailySunday",1,"form-check-input","pr-2"],["for","dailySunday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailyMonday","name","dailyMonday","id","dailyMonday",1,"form-check-input","pr-2",3,"change"],["for","dailyMonday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailyTuesday","name","dailyTuesday","id","dailyTuesday",1,"form-check-input","pr-2",3,"change"],["for","dailyTuesday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailyWednesday","name","dailyWednesday","id","dailyWednesday",1,"form-check-input","pr-2",3,"change"],["for","dailyWednesday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailyThursday","name","dailyThursday","id","dailyThursday",1,"form-check-input","pr-2",3,"change"],["for","dailyThursday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailyFriday","name","dailyFriday","id","dailyFriday",1,"form-check-input","pr-2",3,"change"],["for","dailyFriday",1,"form-label","pl-2"],["type","checkbox","formControlName","dailySaturday","name","dailySaturday","id","dailySaturday",1,"form-check-input","pr-2",3,"change"],["for","dailySaturday",1,"form-label","pl-2"],[1,"mb-4"],[1,"form-check","mb-2"],["type","radio","formControlName","weeklySunday","name","weeklySelection","id","weeklySunday",1,"form-check-input",3,"value"],["for","weeklySunday",1,"form-check-label"],["type","radio","formControlName","weeklyMonday","name","weeklySelection","id","weeklyMonday","selected","",1,"form-check-input",3,"value"],["for","weeklyMonday",1,"form-check-label"],["type","radio","formControlName","weeklyTuesday","name","weeklySelection","id","weeklyTuesday",1,"form-check-input",3,"value"],["for","weeklyTuesday",1,"form-check-label"],["type","radio","formControlName","weeklyWednesday","name","weeklySelection","id","weeklyWednesday",1,"form-check-input",3,"value"],["for","weeklyWednesday",1,"form-check-label"],["type","radio","formControlName","weeklyThursday","name","weeklySelection","id","weeklyThursday",1,"form-check-input",3,"value"],["for","weeklyThursday",1,"form-check-label"],["type","radio","formControlName","weeklyFriday","name","weeklySelection","id","weeklyFriday",1,"form-check-input",3,"value"],["for","weeklyFriday",1,"form-check-label"],["type","radio","formControlName","weeklySaturday","name","weeklySelection","id","weeklySaturday",1,"form-check-input",3,"value"],["for","weeklySaturday",1,"form-check-label"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._UZ(4,"span",4),t.qZA()(),t.TgZ(5,"li",2)(6,"a",5),t._uU(7,"Contratos"),t.qZA()(),t.TgZ(8,"li",6),t._uU(9,"Registrar contrato"),t.qZA()()(),t.YNc(10,Oe,73,14,"div",7)),2&e&&(t.xp6(10),t.Q6J("ngIf",!i.loadingIndicator))},dependencies:[x.rH,h._Y,h.YN,h.Kr,h.Fj,h.Wl,h.EJ,h._,h.JJ,h.JL,h.Q7,B.sg,B.O5,h.sg,h.u]}),n})();var L=f(512),g=f(3627),H=f(2611),Ue=f(9025),G=f(6081),Le=f(5497),X=f(6550),q=f(1576);const Ge=["searchInput"];function Xe(n,o){1&n&&(t.TgZ(0,"mat-header-cell",28)(1,"span",29),t._uU(2,"Nome completo"),t.qZA()())}function qe(n,o){if(1&n&&(t.TgZ(0,"mat-cell",28)(1,"span",30),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.fullname)}}function Ye(n,o){1&n&&t._UZ(0,"mat-header-row",31)}function Qe(n,o){1&n&&t._UZ(0,"mat-row",32)}let je=(()=>{class n{constructor(e,i,a,r,c){var l=this;this.ngxUiLoaderService=e,this.clientsService=i,this.dataService=a,this.titleService=r,this.router=c,this.pagination={},this.totalElements=0,this.pageSizeOptions=Ue.X.pageSizeOptions,this.displayedColumns=["fullname"],this.redirect=(s="")=>{this.router.navigate(""!==s?[`${s}`]:[_.f.routes.dash])},this.initPagination=()=>{this.pagination.offset=0,this.pagination.limit=this.defPagination,this.pagination.filter=""},this.dataLoad=(0,D.Z)(function*(){l.ngxUiLoaderService.startLoader("loader-02");try{const s=yield l.clientsService.findActives(l.pagination);s.data&&(l.dataSource=new g.by(s.data),l.totalElements=s.count,l.dataSource.sort=l.sort)}catch(s){l.dataService.errorHandling(s)}l.ngxUiLoaderService.stopLoader("loader-02")}),this.nextPage=s=>{const{pageSize:d,pageIndex:u}=s;this.dataService.setSelectedPagination(d),this.defPagination=this.dataService.getSelectedPagination(),this.pagination.offset=this.defPagination*u,this.pagination.limit=d,this.dataLoad()},this.searchElement=(s=!1)=>{try{this.pagination.filter=this.searchInput.nativeElement.value,s&&(this.paginator&&this.paginator.firstPage(),this.pagination.offset=0,this.dataLoad())}catch(d){this.dataService.errorHandling(d)}},this.createContractFromClient=s=>{},this.user=this.dataService.getLoggedUser(),(!this.dataService.getIsLoggedIn()||!this.user)&&(this.dataService.clearLoginData(),this.redirect(_.f.routes.login))}ngOnInit(){this.titleService.setTitle("IMPERIAL | Contratos ativos"),this.defPagination=this.dataService.getSelectedPagination(),this.initPagination(),this.dataLoad()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(G.LA),t.Y36(Le.a),t.Y36(A.D),t.Y36(X.Dx),t.Y36(x.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-contracts-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(L.NW,7),t.Gf(H.YE,7),t.Gf(Ge,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first),t.iGM(a=t.CRH())&&(i.searchInput=a.first)}},decls:33,vars:7,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dashboard"],[1,"feather","icon-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"d-flex","align-items-center","flex-wrap","text-nowrap"],[1,"input-group","me-2","mb-2"],["name","searchInput","placeholder","Procurar",1,"form-control","border-primary","bg-transparent",2,"border-top-left-radius","1rem !important","border-bottom-left-radius","1rem !important","margin-left","0.5em","margin-right","0.5em"],["searchInput",""],["type","button",1,"btn","btn-primary","btn-icon",3,"click"],[1,"feather","icon-search"],[1,"col-md-12","stretch-card"],[1,"card","card-table"],[1,"card-body"],[1,"card-title"],[2,"overflow-x","auto !important"],[1,"table-responsive"],["matSort","",1,"common-table",3,"dataSource"],["table",""],["matColumnDef","fullname"],["fxFlex","auto 1 100%",4,"matHeaderCellDef"],["fxFlex","auto 1 100%",4,"matCellDef"],["class","grey-400-bg font-weight-600",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","user","matRipple","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["fxFlex","auto 1 100%"],[2,"margin","0","text-align","center","width","100%"],[2,"margin","0","text-align","left","padding-left","10px","width","100%"],[1,"grey-400-bg","font-weight-600"],["matRipple","",1,"user"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._UZ(4,"span",4),t.qZA()(),t.TgZ(5,"li",2),t._uU(6,"Contratos"),t.qZA(),t.TgZ(7,"li",5),t._uU(8,"Clientes ativos"),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"div",8),t._UZ(12,"input",9,10),t.TgZ(14,"button",11),t.NdJ("click",function(){return i.searchElement(!0)}),t._UZ(15,"span",12),t.qZA()()()(),t.TgZ(16,"div",6)(17,"div",13)(18,"div",14)(19,"div",15)(20,"h6",16),t._uU(21,"Lista de clientes ativos"),t.qZA(),t.TgZ(22,"div",17)(23,"div",18)(24,"mat-table",19,20),t.ynx(26,21),t.YNc(27,Xe,3,0,"mat-header-cell",22),t.YNc(28,qe,3,1,"mat-cell",23),t.BQk(),t.YNc(29,Ye,1,0,"mat-header-row",24),t.YNc(30,Qe,1,0,"mat-row",25),t.qZA()()(),t.TgZ(31,"mat-paginator",26,27),t.NdJ("page",function(r){return i.nextPage(r)}),t.qZA()()()()()),2&e&&(t.xp6(24),t.Q6J("dataSource",i.dataSource),t.xp6(5),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky","true"),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.totalElements)("pageSizeOptions",i.pageSizeOptions)("pageSize",i.defPagination))},dependencies:[x.rH,H.YE,L.NW,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,q.yH],styles:[".loader[_ngcontent-%COMP%]{width:100%!important;height:100%!important;z-index:5001}"]}),n})();var Ke=f(2417),Je=f(5829);function et(n,o){1&n&&(t.TgZ(0,"mat-header-cell",31)(1,"span",32),t._uU(2,"Nome completo"),t.qZA()())}const tt=function(n){return{color:n}};function nt(n,o){if(1&n&&(t.TgZ(0,"mat-cell",31),t._UZ(1,"span",33),t.TgZ(2,"span",34),t._uU(3),t.qZA()()),2&n){const e=o.$implicit;t.xp6(1),t.Gre("feather icon-",e.icon,""),t.Q6J("ngStyle",t.VKq(5,tt,e.color)),t.xp6(2),t.hij(" ",e.fullname," ")}}function ot(n,o){1&n&&(t.TgZ(0,"mat-header-cell",31)(1,"span",32),t._uU(2,"Quantia"),t.qZA()())}function it(n,o){if(1&n&&(t.TgZ(0,"mat-cell",31)(1,"span",35),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e.amount," R ")}}function at(n,o){1&n&&(t.TgZ(0,"mat-header-cell",31)(1,"span",32),t._uU(2,"Aberto"),t.qZA()())}function rt(n,o){if(1&n&&(t.TgZ(0,"mat-cell",31)(1,"span",35),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e.pending," R ")}}function lt(n,o){1&n&&(t.TgZ(0,"mat-header-cell",31)(1,"span",32),t._uU(2,"Valor da pe\xe7a"),t.qZA()())}function st(n,o){if(1&n&&(t.TgZ(0,"mat-cell",31)(1,"span",35),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e.payment," R ")}}function ct(n,o){1&n&&(t.TgZ(0,"mat-header-cell",31)(1,"span",32),t._uU(2,"Pe\xe7as atrasadas"),t.qZA()())}function dt(n,o){if(1&n&&(t.TgZ(0,"mat-cell",31)(1,"span",35),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e.late," ")}}function ut(n,o){1&n&&(t.TgZ(0,"mat-header-cell",31)(1,"span",32),t._uU(2,"Pe\xe7as incompletas"),t.qZA()())}function pt(n,o){if(1&n&&(t.TgZ(0,"mat-cell",31)(1,"span",35),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e.incomplete," ")}}function mt(n,o){1&n&&(t.TgZ(0,"mat-header-cell",31)(1,"span",32),t._uU(2,"Pe\xe7as ao dia"),t.qZA()())}function ht(n,o){if(1&n&&(t.TgZ(0,"mat-cell",31)(1,"span",35),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e.upToDate," ")}}function gt(n,o){1&n&&(t.TgZ(0,"mat-header-cell",31)(1,"span",32),t._uU(2,"Pe\xe7as pendentes"),t.qZA()())}function ft(n,o){if(1&n&&(t.TgZ(0,"mat-cell",31)(1,"span",35),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e.remaining," ")}}function yt(n,o){1&n&&t._UZ(0,"mat-header-row",36)}function wt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-row",37),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.openDetails(r.clientId))}),t.qZA()}}let _t=(()=>{class n{constructor(e,i,a,r,c){var l=this;this.ngxUiLoaderService=e,this.contractsService=i,this.dataService=a,this.titleService=r,this.router=c,this.totalElements=0,this.displayedColumns=["fullname","amount","pending","payment","late","incomplete","upToDate","remaining"],this.redirect=(s="")=>{this.router.navigate(""!==s?[`${s}`]:[_.f.routes.dash])},this.dataLoad=(0,D.Z)(function*(){l.ngxUiLoaderService.startLoader("loader-02");try{const s=yield l.contractsService.getPendingPaymentContracts();if(s.data){l.clients=s.data.map(u=>new Ke.T(u.client))||[];const d=s.data.map(u=>({clientId:u.client.id,fullname:u.client.fullname,icon:u.client.icon,color:u.client.color,amount:u.contractData.amount,pending:u.contractData.pending,payment:u.contractData.payment,late:u.contractData.late,upToDate:u.contractData.upToDate,incomplete:u.contractData.incomplete,remaining:u.contractData.remaining}));l.dataSource=new g.by(d),l.dataSource.sort=l.sort}}catch(s){l.dataService.errorHandling(s)}l.ngxUiLoaderService.stopLoader("loader-02")}),this.refresh=(0,D.Z)(function*(){yield l.dataLoad()}),this.openDetails=s=>{const d=this.clients.find(u=>u.id===s);this.dataService.setExistClient(d),this.redirect(_.f.routes.clientsDetail)},this.openResume=()=>{this.redirect(_.f.routes.movementsDailyResume)},this.user=this.dataService.getLoggedUser(),(!this.dataService.getIsLoggedIn()||!this.user)&&(this.dataService.clearLoginData(),this.redirect(_.f.routes.login))}ngOnInit(){this.titleService.setTitle("IMPERIAL | Pendentes de pagamento"),this.dataLoad()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(G.LA),t.Y36(U.W),t.Y36(A.D),t.Y36(X.Dx),t.Y36(x.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pending"]],viewQuery:function(e,i){if(1&e&&t.Gf(H.YE,7),2&e){let a;t.iGM(a=t.CRH())&&(i.sort=a.first)}},decls:52,vars:4,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dashboard"],[1,"feather","icon-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],[1,"feather","icon-refresh-cw","btn-icon-append"],[1,"col-md-12","stretch-card"],[1,"card","card-table"],[1,"card-body"],[2,"overflow-x","auto !important"],[1,"table-responsive"],["matSort","",1,"common-table",3,"dataSource"],["table",""],["matColumnDef","fullname"],["fxFlex","auto 1 100%",4,"matHeaderCellDef"],["fxFlex","auto 1 100%",4,"matCellDef"],["matColumnDef","amount"],["matColumnDef","pending"],["matColumnDef","payment"],["matColumnDef","late"],["matColumnDef","incomplete"],["matColumnDef","upToDate"],["matColumnDef","remaining"],["class","grey-400-bg font-weight-600",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","user","matRipple","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"row","p-2",2,"width","-webkit-fill-available","left","1em","right","1em"],["type","button",1,"btn","btn-primary",3,"click"],["fxFlex","auto 1 100%"],[2,"margin","0","text-align","center","width","100%"],[3,"ngStyle"],[2,"margin","0","text-align","left","padding-left","10px","width","100%"],[2,"margin","0","text-align","right","padding-right","5px","width","100%"],[1,"grey-400-bg","font-weight-600"],["matRipple","",1,"user",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._UZ(4,"span",4),t.qZA()(),t.TgZ(5,"li",2),t._uU(6,"Contratos"),t.qZA(),t.TgZ(7,"li",5),t._uU(8,"Pendentes de pagamento"),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"button",8),t.NdJ("click",function(){return i.refresh()}),t._uU(12," Atualizar "),t._UZ(13,"span",9),t.qZA()()(),t.TgZ(14,"div",6)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"mat-table",15,16),t.ynx(22,17),t.YNc(23,et,3,0,"mat-header-cell",18),t.YNc(24,nt,4,7,"mat-cell",19),t.BQk(),t.ynx(25,20),t.YNc(26,ot,3,0,"mat-header-cell",18),t.YNc(27,it,3,1,"mat-cell",19),t.BQk(),t.ynx(28,21),t.YNc(29,at,3,0,"mat-header-cell",18),t.YNc(30,rt,3,1,"mat-cell",19),t.BQk(),t.ynx(31,22),t.YNc(32,lt,3,0,"mat-header-cell",18),t.YNc(33,st,3,1,"mat-cell",19),t.BQk(),t.ynx(34,23),t.YNc(35,ct,3,0,"mat-header-cell",18),t.YNc(36,dt,3,1,"mat-cell",19),t.BQk(),t.ynx(37,24),t.YNc(38,ut,3,0,"mat-header-cell",18),t.YNc(39,pt,3,1,"mat-cell",19),t.BQk(),t.ynx(40,25),t.YNc(41,mt,3,0,"mat-header-cell",18),t.YNc(42,ht,3,1,"mat-cell",19),t.BQk(),t.ynx(43,26),t.YNc(44,gt,3,0,"mat-header-cell",18),t.YNc(45,ft,3,1,"mat-cell",19),t.BQk(),t.YNc(46,yt,1,0,"mat-header-row",27),t.YNc(47,wt,1,0,"mat-row",28),t.qZA()()()()()()(),t.TgZ(48,"div",29)(49,"button",30),t.NdJ("click",function(){return i.openResume()}),t.TgZ(50,"span"),t._uU(51,"Resumo do dia"),t.qZA()()()),2&e&&(t.xp6(20),t.Q6J("dataSource",i.dataSource),t.xp6(26),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky","true"),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[x.rH,B.PC,H.YE,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,q.yH,Je.Zl]}),n})();var bt=f(6356);const xt=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:je},{path:"create",component:$e},{path:"pending",component:_t}];let vt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[x.Bz.forChild(xt),h.u5,bt.A,h.UX]}),n})()}}]);