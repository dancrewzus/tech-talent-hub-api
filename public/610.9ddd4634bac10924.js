"use strict";(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[610],{6610:(K,x,r)=>{r.r(x),r.d(x,{MovementsModule:()=>G});var v=r(9562),s=r(5030),f=r(5861),g=r(2534),e=r(2223),b=r(6081),_=r(7066),U=r(3144);let C=(()=>{class t extends _.D{constructor(a){var n;super(),n=this,this.http=a,this.createMovement=function(){var u=(0,f.Z)(function*(m){return n.http.post(`${n.getApiUrl()}/movements`,{...m},{headers:n.getHeaders()}).toPromise()});return function(m){return u.apply(this,arguments)}}(),this.updateUser=function(){var u=(0,f.Z)(function*(m,d){return n.http.patch(`${n.getApiUrl()}/movements/${m}`,{...d},{headers:n.getHeaders()}).toPromise()});return function(m,d){return u.apply(this,arguments)}}(),this.dailyResume=(0,f.Z)(function*(){return n.http.get(`${n.getApiUrl()}/movements/daily-resume`,{headers:n.getHeaders()}).toPromise()})}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(U.eN))},t.\u0275dir=e.lG2({type:t,features:[e.qOj]}),t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var T=r(6550),A=r(4755);let D=(()=>{class t{constructor(a,n,u,m,d,i,l){var p=this;this.ngxUiLoaderService=a,this.movementsService=n,this.dataService=u,this.formBuilder=m,this.titleService=d,this.location=i,this.router=l,this.type="out",this.createForm=()=>this.formBuilder.group({amount:["",s.kI.required],description:["",s.kI.required]}),this.redirect=(h="")=>{this.router.navigate(""!==h?[`${h}`]:[g.f.routes.dash])},this.createPayment=function(){var h=(0,f.Z)(function*(Z){try{p.ngxUiLoaderService.startLoader("loader-02"),Z.preventDefault();const y=p.elementForm.getRawValue(),{amount:z,description:X}=y;yield p.movementsService.createMovement({amount:z,type:p.type,description:X}),p.redirect(g.f.routes.dash)}catch(y){p.dataService.errorHandling(y)}finally{p.ngxUiLoaderService.stopLoader("loader-02")}});return function(Z){return h.apply(this,arguments)}}(),this.dataService.clearCreatedUser()}ngOnInit(){this.titleService.setTitle("IMPERIAL | Registrar despesas"),this.elementForm=this.createForm()}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(b.LA),e.Y36(C),e.Y36(_.D),e.Y36(s.qu),e.Y36(T.Dx),e.Y36(A.Ye),e.Y36(v.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create"]],decls:38,vars:3,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dashboard"],[1,"feather","icon-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["name","elementForm","novalidate","",3,"formGroup"],[1,"mb-3"],["for","amount",1,"form-label"],["type","text","id","amount","name","amount","appInputRestriction","float","formControlName","amount","oninput","this.value=this.value.replace(/[^0-9]/g,'')","required","",1,"form-control",2,"text-align","right","padding-right","1em"],["for","description",1,"form-label"],["id","description","formControlName","description","autocomplete","off","required","",1,"form-control"],[1,"row","mb-3"],["for","refers",1,"col-10","form-label"],[1,"col-2"],["type","button",1,"btn","btn-primary","btn-icon",3,"click"],[1,"feather","icon-search"],["type","file","id","formFile",1,"form-control",2,"display","none"],["formFile",""],[2,"text-align","center"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled","click"],[1,"btn","btn-secondary",3,"routerLink","click"]],template:function(a,n){if(1&a){const u=e.EpF();e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"span",4),e.qZA()(),e.TgZ(5,"li",2),e._uU(6,"Movimentos"),e.qZA(),e.TgZ(7,"li",5),e._uU(8,"Registrar despesas"),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h6",10),e._uU(14,"Registrar despesas"),e.qZA(),e.TgZ(15,"form",11)(16,"div",12)(17,"label",13),e._uU(18,"Quantia"),e.qZA(),e._UZ(19,"input",14),e.qZA(),e.TgZ(20,"div",12)(21,"label",15),e._uU(22,"Descri\xe7\xe3o"),e.qZA(),e._UZ(23,"textarea",16),e.qZA(),e.TgZ(24,"div",17)(25,"label",18),e._uU(26,"Enviar imagem"),e.qZA(),e.TgZ(27,"div",19)(28,"button",20),e.NdJ("click",function(){e.CHM(u);const d=e.MAs(31);return e.KtG(d.click())}),e._UZ(29,"span",21),e.qZA(),e._UZ(30,"input",22,23),e.qZA()(),e._UZ(32,"hr"),e.TgZ(33,"div",24)(34,"button",25),e.NdJ("click",function(d){return n.createPayment(d)}),e._uU(35,"Aceitar"),e.qZA(),e.TgZ(36,"button",26),e.NdJ("click",function(){return!1}),e._uU(37,"Cancelar"),e.qZA()()()()()()()}2&a&&(e.xp6(15),e.Q6J("formGroup",n.elementForm),e.xp6(19),e.Q6J("disabled",n.elementForm.invalid),e.xp6(2),e.Q6J("routerLink","/admin/dashboard"))},dependencies:[v.rH,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u]}),t})();var R=r(9291),S=r(5226),M=r.n(S),c=r(3627),q=r(2611),Y=r(1576);function F(t,o){1&t&&(e.TgZ(0,"mat-header-cell",28)(1,"span",29),e._uU(2,"Descri\xe7\xe3o"),e.qZA()())}function w(t,o){if(1&t&&(e.TgZ(0,"mat-cell",28)(1,"span",30),e._uU(2),e.qZA()()),2&t){const a=o.$implicit;e.xp6(2),e.Oqu(a.description)}}function L(t,o){1&t&&(e.TgZ(0,"mat-header-cell",31)(1,"span",29),e._uU(2,"Receitas"),e.qZA()())}function I(t,o){if(1&t&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&t){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.amount)}}function N(t,o){1&t&&(e.TgZ(0,"span",33),e._uU(1,"0"),e.qZA())}function J(t,o){if(1&t&&(e.TgZ(0,"mat-cell",31),e.YNc(1,I,2,1,"span",32),e.YNc(2,N,2,0,"span",32),e.qZA()),2&t){const a=o.$implicit;e.xp6(1),e.Q6J("ngIf","in"===a.type),e.xp6(1),e.Q6J("ngIf","in"!==a.type)}}function k(t,o){1&t&&(e.TgZ(0,"mat-header-cell",31)(1,"span",29),e._uU(2,"Despesas"),e.qZA()())}function Q(t,o){if(1&t&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&t){const a=e.oxw().$implicit;e.xp6(1),e.hij("-",a.amount,"")}}function H(t,o){1&t&&(e.TgZ(0,"span",33),e._uU(1,"0"),e.qZA())}function B(t,o){if(1&t&&(e.TgZ(0,"mat-cell",31),e.YNc(1,Q,2,1,"span",32),e.YNc(2,H,2,0,"span",32),e.qZA()),2&t){const a=o.$implicit;e.xp6(1),e.Q6J("ngIf","out"===a.type),e.xp6(1),e.Q6J("ngIf","out"!==a.type)}}function E(t,o){1&t&&e._UZ(0,"mat-header-row",34)}function $(t,o){1&t&&e._UZ(0,"mat-row",35)}function O(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(a);const u=e.oxw();return e.KtG(u.blockDailyResume())}),e.TgZ(1,"span"),e._uU(2,"Bloquear"),e.qZA()()}}function P(t,o){1&t&&(e.TgZ(0,"button",37)(1,"span"),e._uU(2,"Bloqueado"),e.qZA()())}const j=[{path:"",redirectTo:"create",pathMatch:"full"},{path:"create",component:D},{path:"daily-resume",component:(()=>{class t{constructor(a,n,u,m,d){var i=this;this.ngxUiLoaderService=a,this.movementsService=n,this.dataService=u,this.titleService=m,this.router=d,this.yesterdayAmount=0,this.todayAmount=0,this.movementsFromToday=[],this.closed=!1,this.displayedColumns=["details","incomes","expenses"],this.redirect=(l="")=>{this.router.navigate(""!==l?[`${l}`]:[g.f.routes.dash])},this.loadData=(0,f.Z)(function*(){i.ngxUiLoaderService.startLoader("loader-02");try{const l=yield i.movementsService.dailyResume();if(l){const{yesterdayAmount:p,todayAmount:h,movementsFromToday:Z,closed:y}=l;i.yesterdayAmount=p,i.todayAmount=h,i.closed=y,i.dataSource=new c.by(Z)}}catch(l){i.dataService.errorHandling(l)}finally{i.ngxUiLoaderService.stopLoader("loader-02")}}),this.blockDailyResume=(0,f.Z)(function*(){M().fire({title:"Tem certeza?",text:"Essa a\xe7\xe3o n\xe3o pode ser desfeita!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, bloquear!",cancelButtonText:"Cancelar"}).then(l=>{l.isConfirmed&&i.createFinalMovement()})}),this.createFinalMovement=(0,f.Z)(function*(){try{i.ngxUiLoaderService.startLoader("loader-02"),yield i.movementsService.createMovement({amount:i.todayAmount,type:"final",description:"Feche do caixa"}),i.redirect(g.f.routes.dash)}catch(l){i.dataService.errorHandling(l)}finally{i.ngxUiLoaderService.stopLoader("loader-02")}}),this.user=this.dataService.getLoggedUser(),(!this.dataService.getIsLoggedIn()||!this.user)&&(this.dataService.clearLoginData(),this.redirect(g.f.routes.login))}ngOnInit(){this.titleService.setTitle("IMPERIAL | Resumo do dia"),this.loadData()}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(b.LA),e.Y36(C),e.Y36(_.D),e.Y36(T.Dx),e.Y36(v.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-daily-resume"]],decls:47,vars:8,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/dashboard"],[1,"feather","icon-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card","card-table"],[1,"card-body"],[1,"card-title"],[1,"mb-3"],[2,"overflow-x","auto !important"],[1,"table-responsive"],["matSort","",1,"common-table",3,"dataSource"],["table",""],["matColumnDef","details"],["fxFlex","auto 1 150px",4,"matHeaderCellDef"],["fxFlex","auto 1 150px",4,"matCellDef"],["matColumnDef","incomes"],["fxFlex","auto 1 100px",4,"matHeaderCellDef"],["fxFlex","auto 1 100px",4,"matCellDef"],["matColumnDef","expenses"],["class","grey-400-bg font-weight-600",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","user","matRipple","",4,"matRowDef","matRowDefColumns"],[1,"row","p-2","mt-4",2,"position","sticky","width","-webkit-fill-available","bottom","4em","left","1em","right","1em"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["fxFlex","auto 1 150px"],[2,"margin","0","text-align","center","width","100%"],[2,"margin","0","text-align","left","width","100%"],["fxFlex","auto 1 100px"],["style","margin: 0; text-align: right; width: 100%;",4,"ngIf"],[2,"margin","0","text-align","right","width","100%"],[1,"grey-400-bg","font-weight-600"],["matRipple","",1,"user"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","disabled","",1,"btn","btn-primary"]],template:function(a,n){1&a&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._UZ(4,"span",4),e.qZA()(),e.TgZ(5,"li",2),e._uU(6,"Movimentos"),e.qZA(),e.TgZ(7,"li",5),e._uU(8,"Resumo do dia"),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h6",10),e._uU(14,"Resumo do dia"),e.qZA(),e.TgZ(15,"div",11)(16,"span")(17,"b"),e._uU(18,"Saldo anterior:"),e.qZA(),e._uU(19),e.qZA(),e._UZ(20,"br"),e.qZA(),e.TgZ(21,"div",12)(22,"div",13)(23,"mat-table",14,15),e.ynx(25,16),e.YNc(26,F,3,0,"mat-header-cell",17),e.YNc(27,w,3,1,"mat-cell",18),e.BQk(),e.ynx(28,19),e.YNc(29,L,3,0,"mat-header-cell",20),e.YNc(30,J,3,2,"mat-cell",21),e.BQk(),e.ynx(31,22),e.YNc(32,k,3,0,"mat-header-cell",20),e.YNc(33,B,3,2,"mat-cell",21),e.BQk(),e.YNc(34,E,1,0,"mat-header-row",23),e.YNc(35,$,1,0,"mat-row",24),e.qZA()()(),e._UZ(36,"br")(37,"br"),e.TgZ(38,"div",11)(39,"span")(40,"b"),e._uU(41,"Saldo do dia:"),e.qZA(),e._uU(42),e.qZA(),e._UZ(43,"br"),e.qZA()()()()(),e.TgZ(44,"div",25),e.YNc(45,O,3,0,"button",26),e.YNc(46,P,3,0,"button",27),e.qZA()),2&a&&(e.xp6(19),e.hij(" ",n.yesterdayAmount,""),e.xp6(4),e.Q6J("dataSource",n.dataSource),e.xp6(11),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky","true"),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(7),e.hij(" ",n.todayAmount,""),e.xp6(3),e.Q6J("ngIf",!n.closed),e.xp6(1),e.Q6J("ngIf",n.closed))},dependencies:[v.rH,A.O5,q.YE,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,Y.yH],styles:[".ngx-datatable[_ngcontent-%COMP%]   .datatable-footer[_ngcontent-%COMP%]{display:none!important}"]}),t})()}];let G=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.Bz.forChild(j),s.u5,R.A,s.UX]}),t})()}}]);