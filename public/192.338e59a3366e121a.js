"use strict";(self.webpackChunkimperial=self.webpackChunkimperial||[]).push([[192],{9192:($,C,a)=>{a.r(C),a.d(C,{AuthenticationModule:()=>R});var p=a(9562),r=a(5030),T=a(6356),y=a(5861),v=a(2534),e=a(2223),b=a(7066),k=a(3144);let U=(()=>{class t extends b.D{constructor(n){var o;super(),o=this,this.http=n,this.login=function(){var c=(0,y.Z)(function*(i){const{cpf:l,password:g}=i;return yield o.http.post(`${o.getApiUrl()}/auth/login`,{cpf:l,password:g}).toPromise()});return function(i){return c.apply(this,arguments)}}()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(k.eN))},t.\u0275dir=e.lG2({type:t,features:[e.qOj]}),t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=a(9089),A=a(6550),h=a(4755),f=a(5829);function M(t,s){1&t&&e._UZ(0,"i",34)}function P(t,s){1&t&&e._UZ(0,"i",35)}function F(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",36)(1,"h5",37),e._uU(2,"Pol\xedticas de privacidad"),e.qZA(),e.TgZ(3,"button",38),e.NdJ("click",function(){const i=e.CHM(n).$implicit;return e.KtG(i.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",39)(5,"p"),e._uU(6,"Pol\xedticas de privacidad"),e.qZA()(),e.TgZ(7,"div",40)(8,"button",41),e.NdJ("click",function(){const i=e.CHM(n).$implicit;return e.KtG(i.close("closed"))}),e._uU(9,"Cerrar"),e.qZA()()}}const x=function(){return{"background-image":"url(assets/images/backgrounds/login.png)"}},O=function(t){return{"error-border":t}};function S(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",20)(1,"h5",21),e._uU(2,"Modal title"),e.qZA(),e.TgZ(3,"button",22),e.NdJ("click",function(){const i=e.CHM(n).$implicit;return e.KtG(i.close("by: close icon"))}),e.qZA()(),e.TgZ(4,"div",23)(5,"p"),e._uU(6,"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros."),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor."),e.qZA(),e.TgZ(9,"p"),e._uU(10,"Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla."),e.qZA(),e.TgZ(11,"p"),e._uU(12,"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros."),e.qZA(),e.TgZ(13,"p"),e._uU(14,"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor."),e.qZA(),e.TgZ(15,"p"),e._uU(16,"Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla."),e.qZA(),e.TgZ(17,"p"),e._uU(18,"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros."),e.qZA(),e.TgZ(19,"p"),e._uU(20,"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor."),e.qZA(),e.TgZ(21,"p"),e._uU(22,"Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla."),e.qZA(),e.TgZ(23,"p"),e._uU(24,"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros."),e.qZA(),e.TgZ(25,"p"),e._uU(26,"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor."),e.qZA(),e.TgZ(27,"p"),e._uU(28,"Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla."),e.qZA(),e.TgZ(29,"p"),e._uU(30,"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros."),e.qZA(),e.TgZ(31,"p"),e._uU(32,"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor."),e.qZA(),e.TgZ(33,"p"),e._uU(34,"Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla."),e.qZA(),e.TgZ(35,"p"),e._uU(36,"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros."),e.qZA(),e.TgZ(37,"p"),e._uU(38,"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor."),e.qZA(),e.TgZ(39,"p"),e._uU(40,"Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla."),e.qZA()(),e.TgZ(41,"div",24)(42,"button",25),e.NdJ("click",function(){const i=e.CHM(n).$implicit;return e.KtG(i.close("closed"))}),e._uU(43,"Cerrar"),e.qZA()()}}const I=function(){return{"background-image":"url(assets/images/backgrounds/recovery.png)"}},J=function(t){return{"error-border":t}},D=[{path:"",component:(()=>{class t{constructor(n,o,c,i,l,g,w,N){var m=this;if(this.authService=n,this.formBuilder=o,this.dataService=c,this.modalService=i,this.route=l,this.titleService=g,this.router=w,this.meta=N,this.hide=!1,this.redirect=(u="")=>{""!==u?this.router.navigate([`${u}`]):this.dataService.getLoggedUser()?.permission.includes("Clt")?this.router.navigate([`/${v.f.routes.admin}/${v.f.routes.clients}/${v.f.routes.detail}`]):this.router.navigate([`/${v.f.routes.admin}/${v.f.routes.dash}`])},this.createForm=()=>this.formBuilder.group({cpf:["",r.kI.required],password:["",r.kI.required],remember:[!1,null]}),this.patchForm=()=>{const u=this.dataService.getRememberedUser();this.elementForm.patchValue({cpf:u?u.cpf:"",remember:!!u})},this.loginWithGoogle=u=>{},this.onLoggedIn=function(){var u=(0,y.Z)(function*(d){d.preventDefault();const Y=m.elementForm.getRawValue(),{cpf:E,password:j,remember:G}=Y;try{const Z=yield m.authService.login({cpf:E,password:j}),{token:Q,user:q}=Z;G&&m.dataService.setRememberedUser(q),m.dataService.setRefreshToken(Q),m.dataService.setLoggedUser(q),m.dataService.setIsLoggedIn(!0),m.redirect()}catch(Z){m.dataService.errorHandling(Z)}});return function(d){return u.apply(this,arguments)}}(),this.recovery=()=>this.router.navigate(["auth/recovery"]),this.register=()=>this.router.navigate(["auth/register"]),this.openPoliticsModal=u=>{this.modalService.open(u,{scrollable:!0}).result.then(d=>{console.log("Modal closed"+d)}).catch(d=>{})},this.dataService.getIsLoggedIn()){const u=this.dataService.getRefreshToken(),d=this.dataService.getLoggedUser();(!u||!d)&&this.dataService.clearLoginData(),this.redirect()}}ngOnInit(){this.elementForm=this.createForm(),this.patchForm()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(U),e.Y36(r.qu),e.Y36(b.D),e.Y36(_.FF),e.Y36(p.gz),e.Y36(A.Dx),e.Y36(p.F0),e.Y36(A.h_))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:49,vars:10,consts:[[1,"row","w-100","mx-0","auth-page"],[1,"col-md-8","col-xl-6","mx-auto"],[1,"card"],[1,"row"],[1,"col-md-4","pe-md-0"],[1,"auth-side-wrapper",3,"ngStyle"],[1,"col-md-8","ps-md-0"],[1,"auth-form-wrapper","px-4","py-5"],["name","elementForm","novalidate","",3,"formGroup"],["routerLink",".",1,"nobleui-logo","logo-light","d-block","mb-2"],[1,"text-muted","fw-normal","mb-4"],[1,"mb-3"],["for","loginEmail",1,"form-label"],["type","text","formControlName","cpf","appInputRestriction","int","id","loginCpf","oninput","this.value=this.value.replace(/[^0-9]/g,'')","required","",1,"form-control"],["for","loginPassword",1,"form-label"],[1,"input-group"],["placement","bottom","ngbTooltip","Tooltip on bottom",1,"input-group-text","hover",3,"click"],["class","mdi mdi-eye-off",4,"ngIf"],["class","mdi mdi-eye",4,"ngIf"],["formControlName","password","id","loginPassword","required","",1,"form-control",3,"ngClass","type"],[1,"col-md-6"],[1,"form-check"],["type","checkbox","formControlName","remember","id","loginAuthCheck",1,"form-check-input"],["for","loginAuthCheck",1,"form-check-label"],[1,"col-md-6","text-end"],[1,"d-block","auth",3,"click"],[1,"separator"],[1,"row","justify-content-center"],[1,"col-8","col-md-4","pe-md-0"],[1,"d-grid","gap-2"],[1,"btn","btn-primary","me-2","mb-2","mb-md-0",3,"disabled","click"],[1,"text-center"],[1,"link-primary",3,"click"],["scrollableModal",""],[1,"mdi","mdi-eye-off"],[1,"mdi","mdi-eye"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,o){if(1&n){const c=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.TgZ(6,"div",6)(7,"div",7)(8,"form",8)(9,"a",9)(10,"span"),e._uU(11,"IMPERIAL"),e.qZA(),e._uU(12," Pronto "),e.qZA(),e.TgZ(13,"h5",10),e._uU(14," Sistema de cobros "),e.qZA(),e.TgZ(15,"div",11)(16,"label",12),e._uU(17,"CPF"),e.qZA(),e._UZ(18,"input",13),e.qZA(),e.TgZ(19,"div",11)(20,"label",14),e._uU(21,"Contrase\xf1a"),e.qZA(),e.TgZ(22,"div",15)(23,"span",16),e.NdJ("click",function(){return o.hide=!o.hide}),e.YNc(24,M,1,0,"i",17),e.YNc(25,P,1,0,"i",18),e.qZA(),e._UZ(26,"input",19),e.qZA()(),e.TgZ(27,"div",3)(28,"div",20)(29,"div",21),e._UZ(30,"input",22),e.TgZ(31,"label",23),e._uU(32," Recu\xe9rdame "),e.qZA()()(),e.TgZ(33,"div",24)(34,"a",25),e.NdJ("click",function(){return o.recovery()}),e._uU(35,"\xbfOlvidaste tu contrase\xf1a?"),e.qZA()()(),e._UZ(36,"div",26),e.TgZ(37,"div",27)(38,"div",28)(39,"div",29)(40,"button",30),e.NdJ("click",function(l){return o.onLoggedIn(l)}),e._uU(41," Iniciar sesi\xf3n "),e.qZA()()()()(),e._UZ(42,"div",26),e.TgZ(43,"p",31),e._uU(44,"Visite nuestra "),e.TgZ(45,"a",32),e.NdJ("click",function(){e.CHM(c);const l=e.MAs(48);return e.KtG(o.openPoliticsModal(l))}),e._uU(46,"pol\xedticas de privacidad"),e.qZA()()()()()()()(),e.YNc(47,F,10,0,"ng-template",null,33,e.W1O)}2&n&&(e.xp6(5),e.Q6J("ngStyle",e.DdM(7,x)),e.xp6(3),e.Q6J("formGroup",o.elementForm),e.xp6(16),e.Q6J("ngIf",!o.hide),e.xp6(1),e.Q6J("ngIf",o.hide),e.xp6(1),e.Q6J("ngClass",e.VKq(8,O,null!=o.elementForm.controls.password.errors))("type",o.hide?"text":"password"),e.xp6(14),e.Q6J("disabled",o.elementForm.invalid))},dependencies:[p.rH,r._Y,r.Fj,r.Wl,r.JJ,r.JL,r.Q7,h.mk,h.O5,h.PC,f.oO,f.Zl,_._L,r.sg,r.u],styles:["[_nghost-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center;background-color:#161616}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{border:0!important;background-color:transparent!important;box-shadow:none!important;-webkit-box-shadow:none!important}[_nghost-%COMP%]   .border-secondary[_ngcontent-%COMP%]{border-color:#3a3a3a!important}[_nghost-%COMP%]   .error-border[_ngcontent-%COMP%]{border:1px solid #b14038!important}[_nghost-%COMP%]   .hover[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .auth[_ngcontent-%COMP%]{color:#97a2b8!important;transition:color .15s ease-in-out!important}[_nghost-%COMP%]   .auth[_ngcontent-%COMP%]:hover{color:#c5ccd8!important}"]}),t})()},{path:"recovery",component:(()=>{class t{constructor(n,o,c,i){this.formBuilder=n,this.dataService=o,this.modalService=c,this.router=i,this.hide=!1,this.createForm=()=>this.formBuilder.group({name:["",r.kI.required],lastName:["",r.kI.required],email:["",[r.kI.required,r.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]],password:["",r.kI.required],privacy:[!1,r.kI.requiredTrue]}),this.login=()=>this.router.navigate(["auth/login"]),this.openPoliticsModal=l=>{this.modalService.open(l,{scrollable:!0}).result.then(g=>{console.log("Modal closed"+g)}).catch(g=>{})}}ngOnInit(){this.elementForm=this.createForm()}onRegister(n){n.preventDefault(),localStorage.setItem("isLoggedin","true"),localStorage.getItem("isLoggedin")&&this.router.navigate(["/"])}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(r.qu),e.Y36(b.D),e.Y36(_.FF),e.Y36(p.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recovery"]],decls:31,vars:7,consts:[[1,"row","w-100","mx-0","auth-page"],[1,"col-md-8","col-xl-6","mx-auto"],[1,"card"],[1,"row"],[1,"col-md-4","pe-md-0"],[1,"auth-side-wrapper",3,"ngStyle"],[1,"col-md-8","ps-md-0"],[1,"auth-form-wrapper","px-4","py-5"],["name","elementForm","novalidate","",3,"formGroup"],["routerLink",".",1,"nobleui-logo","logo-light","d-block","mb-2"],[1,"text-muted","fw-normal","mb-4"],[1,"mb-3"],["for","registerEmail",1,"form-label"],["type","email","formControlName","email","id","registerEmail","required","",1,"form-control",3,"ngClass"],[1,"separator"],[1,"col-6","pe-md-0"],[1,"d-grid","gap-2"],[1,"btn","btn-primary","me-2","mb-2","mb-md-0",3,"disabled","click"],["type","button",1,"btn","btn-outline-primary","mb-2","mb-md-0",3,"click"],["scrollableModal",""],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.TgZ(6,"div",6)(7,"div",7)(8,"form",8)(9,"a",9)(10,"span"),e._uU(11,"IMPERIAL"),e.qZA(),e._uU(12," Pronto "),e.qZA(),e.TgZ(13,"h5",10),e._uU(14," Recupera tu cuenta. Enviaremos un correo a tu email registrado con un c\xf3digo, te pediremos ese c\xf3digo m\xe1s adelante "),e.qZA(),e.TgZ(15,"div",11)(16,"label",12),e._uU(17,"Direcci\xf3n de correo"),e.qZA(),e._UZ(18,"input",13),e.qZA(),e._UZ(19,"div",14),e.TgZ(20,"div",3)(21,"div",15)(22,"div",16)(23,"button",17),e.NdJ("click",function(i){return o.onRegister(i)}),e._uU(24," Enviar correo "),e.qZA()()(),e.TgZ(25,"div",15)(26,"div",16)(27,"button",18),e.NdJ("click",function(){return o.login()}),e._uU(28," \xa1Record\xe9 mi contrase\xf1a! "),e.qZA()()()()()()()()()()(),e.YNc(29,S,44,0,"ng-template",null,19,e.W1O)),2&n&&(e.xp6(5),e.Q6J("ngStyle",e.DdM(4,I)),e.xp6(3),e.Q6J("formGroup",o.elementForm),e.xp6(10),e.Q6J("ngClass",e.VKq(5,J,null!=o.elementForm.controls.email.errors)),e.xp6(5),e.Q6J("disabled",o.elementForm.invalid))},dependencies:[p.rH,r._Y,r.Fj,r.JJ,r.JL,r.Q7,h.mk,h.PC,f.oO,f.Zl,r.sg,r.u],styles:["[_nghost-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center;background-color:#161616}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{border:0!important;background-color:transparent!important;box-shadow:none!important;-webkit-box-shadow:none!important}[_nghost-%COMP%]   .border-secondary[_ngcontent-%COMP%]{border-color:#3a3a3a!important}[_nghost-%COMP%]   .error-border[_ngcontent-%COMP%]{border:1px solid #b14038!important}[_nghost-%COMP%]   .hover[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .auth[_ngcontent-%COMP%]{color:#97a2b8!important;transition:color .15s ease-in-out!important}[_nghost-%COMP%]   .auth[_ngcontent-%COMP%]:hover{color:#c5ccd8!important}"]}),t})()}];let R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(D),r.u5,T.A,r.UX]}),t})()}}]);